<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Datanaut</title>
    <description>Exploring, discovering and &quot;charting&quot; the Dataverse</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Fri, 21 Apr 2017 11:00:58 +0000</pubDate>
    <lastBuildDate>Fri, 21 Apr 2017 11:00:58 +0000</lastBuildDate>
    <generator>Jekyll v3.4.3</generator>
    
      <item>
        <title>Dances with Factors (Tutorial)</title>
        <description>&lt;h2 id=&quot;interactive-project-link&quot;&gt;&lt;a href=&quot;http://chrisrzhou.datanaut.io/projects/d3-dances-with-factors/&quot;&gt;Interactive Project Link&lt;/a&gt;&lt;/h2&gt;

&lt;hr&gt;

&lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;#overview&quot;&gt;Overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#math&quot;&gt;Math&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#prime-factorization&quot;&gt;Prime factorization&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#adjustments&quot;&gt;Adjustments&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#d3&quot;&gt;D3&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#generating-points&quot;&gt;Generating points&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#visualization-components&quot;&gt;Visualization components&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#updates-and-transitions&quot;&gt;Updates and transitions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#adding-user-interactions&quot;&gt;Adding User Interactions&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#stop&quot;&gt;Stop&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#forward&quot;&gt;Forward&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#backward&quot;&gt;Backward&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#search&quot;&gt;Search&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#samples&quot;&gt;Samples&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#resources&quot;&gt;Resources&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;h2 id=&quot;overview&quot;&gt;Overview&lt;/h2&gt;

&lt;p&gt;Dances with Factors is inspired by the creation of &lt;a href=&quot;http://www.datapointed.net/visualizations/math/factorization/animated-diagrams/&quot;&gt;Stephen Von Worley&lt;/a&gt;, which in turn is based on the original idea by
&lt;a href=&quot;http://mathlesstraveled.com/2012/10/05/factorization-diagrams/&quot;&gt;Brent Yorgey&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This visualization helps us track the prime factorization of a number. We can easily identify primes when we arrive at a
simple circle (i.e. a prime cannot be composed of smaller divisors). We can also identify common patterns of smaller prime
divisors e.g. &lt;code&gt;2&lt;/code&gt;, &lt;code&gt;3&lt;/code&gt;, &lt;code&gt;5&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This tutorial will explain how we can organize the project workflow into very simple and intuitive parts. A 
pseudocode workflow is presented:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// generate prime factorization of n e.g. 180 = [2, 2, 3, 3, 5]&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;primeFactors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// generate an array of point objects from factors eg. points = [point_1, point_2, ... point_n]&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;generatePoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// initialize vis object and build update function that contains D3 code to draw and update vis using the points data&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{};&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;speed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// pseudocode for update&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// update number&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;primeFactors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// update factors&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;generatePoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// update factors&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// D3 code to draw points and update transitions&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can download the files used in this guide in the &lt;a href=&quot;https://gist.github.com/chrisrzhou/3fec15b05684fa0cf42e&quot;&gt;Github source code&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;math&quot;&gt;Math&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;The fundamental theorem of arithmetic states that every integer greater than 1 is either prime itself or a product of
  prime numbers.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The fundamental theorem of arithemetic is the basis for this visualization.  Given a number &lt;code&gt;n&lt;/code&gt;, we are guaranteed an array
of prime factors &lt;code&gt;[p1, p2, p3, ... pn]&lt;/code&gt;, which we use as a foundation for iteratively drawing subgroups of points in the
visualization.&lt;/p&gt;

&lt;h3 id=&quot;prime-factorization&quot;&gt;Prime factorization&lt;/h3&gt;

&lt;p&gt;Bulk of the prime factorization code was derived from a previous Python script that I worked on to solve mathematical
problems on &lt;a href=&quot;http://nbviewer.ipython.org/github/chrisrzhou/nbEuler/blob/master/notebooks/notebook_003.ipynb&quot;&gt;Project Euler&lt;/a&gt;.  Porting the implementation to Javascript is fairly easy, and we will build two functions
&lt;code&gt;primeFactors&lt;/code&gt; and &lt;code&gt;getFactor&lt;/code&gt; to generate all prime factors of an integer &lt;code&gt;n&lt;/code&gt; in ascending order.&lt;/p&gt;

&lt;p&gt;Here is the code for &lt;code&gt;primeFactors&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;cm&quot;&gt;/**
 * Return array of prime factors (in ascending order) of n.
 * 
 * We will represent even powers of 2 as 4, for ease of plotting
 * 
 * Examples:
 *    primeFactors(1) = []
 *    primeFactors(10) = [2, 5]
 *    primeFactors(5) = [5]
 */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;primeFactors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Argument error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;factor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getFactor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// call getFactor function&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;factor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;  We start with a number &lt;code&gt;n&lt;/code&gt; and assert that it is greater than &lt;code&gt;1&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;  Beginning with &lt;code&gt;n&lt;/code&gt;, we will obtain the &lt;strong&gt;smallest&lt;/strong&gt; prime factor of &lt;code&gt;n&lt;/code&gt; with the helper function &lt;code&gt;getFactor&lt;/code&gt; and assign
it to &lt;code&gt;factor&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;  Divide and update &lt;code&gt;n&lt;/code&gt; by &lt;code&gt;factor&lt;/code&gt; while collecting the factors in the array &lt;code&gt;result&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;  Iteratively repeat the process until we arrive on the termination condition i.e. &lt;code&gt;n = 1&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;p&gt;An example is provided below:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// example primeFactors(120) = [2, 2, 2, 3, 5]&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;primeFactors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;120&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// getFactor(120) = 2, n updates to 60&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// getFactor(60) = 2, n updates to 30&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// getFactor(30) = 2, n updates to 15&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// getFactor(15) = 3, n updates to 5&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// getFactor(5) = 5, n updates to 1&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The implementation for the helper function &lt;code&gt;getFactor&lt;/code&gt; is provided below:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;cm&quot;&gt;/** 
 * Return smallest prime factor of n.
 */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getFactor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Argument error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;floor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sqrt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;We start with a number &lt;code&gt;n&lt;/code&gt; and return &lt;code&gt;2&lt;/code&gt; if &lt;code&gt;n&lt;/code&gt; is even (since &lt;code&gt;2&lt;/code&gt; is the smallest factor that divides an even number).&lt;/li&gt;
&lt;li&gt;If &lt;code&gt;n&lt;/code&gt; is odd, we iteratively check to see if it is divisible by &lt;code&gt;i&lt;/code&gt; where &lt;code&gt;i&lt;/code&gt; is incremented by &lt;code&gt;2&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;adjustments&quot;&gt;Adjustments&lt;/h3&gt;

&lt;p&gt;We now have the math code that generates an array of prime factors for any integer &lt;code&gt;n&lt;/code&gt;.  However, we need to make a small
output adjustment to the &lt;code&gt;factors&lt;/code&gt; array to simplify subsequent D3 visualizations.&lt;/p&gt;

&lt;p&gt;In particular, we wish to visualize groups of &lt;code&gt;2&lt;/code&gt; and &lt;code&gt;4&lt;/code&gt; differently.  Take a look at the desired outputs of &lt;code&gt;8&lt;/code&gt; and &lt;code&gt;16&lt;/code&gt;
shown below and notice how they are grouped differently.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/datanaut/projects/d3-dances-with-factors/image-8.png&quot; alt=&quot;image-8&quot;&gt; &lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/datanaut/projects/d3-dances-with-factors/image-16.png&quot; alt=&quot;image-16&quot;&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;We want to group points together in a square (&lt;code&gt;4&lt;/code&gt;) rather than sets of pairs (&lt;code&gt;2&lt;/code&gt;) whenever possible.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;We can accomplish this grouping easily by &amp;quot;cheating&amp;quot; and assume that &lt;code&gt;4&lt;/code&gt; is a unique &amp;quot;prime&amp;quot; which cannot be broken down
into simpler representation of smaller primes.&lt;/p&gt;

&lt;p&gt;Mathematically we know that this is not true, but this small change allows for a much simpler D3 visualization
implementation since we can ignore special plotting cases for &lt;code&gt;2&lt;/code&gt; and &lt;code&gt;4&lt;/code&gt;, and rely entirely on the geometry of angles to
layout the points.&lt;/p&gt;

&lt;p&gt;The code adjustment is as simple as adding a conditional&lt;code&gt;return&lt;/code&gt; statement in &lt;code&gt;getFactor&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;c1&quot;&gt;//function getFactor(n) {&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//  if (n &amp;lt; 2) throw &quot;Argument error&quot;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//  if (n % 2 == 0) return 2;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//  for (var i = 3; i &amp;lt;= Math.floor(Math.sqrt(n)); i += 2) {&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//    if (n % i == 0) return i;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//  }&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//  return n;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This prioritizes returning a factor of &lt;code&gt;4&lt;/code&gt; whenever possible and returning &lt;code&gt;2&lt;/code&gt; only when necessary.  As a result, the
outputs of &lt;code&gt;primeFactors&lt;/code&gt; is now different.  For the same example above:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// previously primeFactors(120) = [2, 2, 2, 3, 5]&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;primeFactors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;120&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// returning 4 first&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Lastly, let&amp;#39;s write a function that helps print out a string representation of our prime &lt;code&gt;factors&lt;/code&gt; array.  We will print
&lt;code&gt;&amp;quot;prime&amp;quot;&lt;/code&gt; when our &lt;code&gt;factors&lt;/code&gt; array has only one element, and iteratively print out a concatenated string of factors
otherwise.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;cm&quot;&gt;/**
 * Print string representation of array of prime factors
 * Examples
 *    printFactors([4, 3, 5]) = &quot;2 × 2 × 3 × 5&quot;
 *    printFactors([3, 5]) = &quot;3 × 5&quot;
 *    printFactors([7]) = &quot;prime&quot;
 */&lt;/span&gt;
 &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;printFactors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;2 × 2&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;prime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

   &lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;nx&quot;&gt;stringFactor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;factor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;2 × 2&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;factor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;stringFactor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot; × &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// remove last two characters&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;If you have strong opinions to not alter the mathematical sanctity of prime factorization and prefer to delegate logic
  to their responsible areas, I&amp;#39;m definitely with you on that.  But this is one simple tweak that would make our life a
  lot easier with D3 plotting, as we will now discuss in the next section.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;d3&quot;&gt;D3&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;Please refer to the &lt;a href=&quot;https://gist.githubusercontent.com/chrisrzhou/3fec15b05684fa0cf42e/raw/c57df3d28276ae2affa786a408fd042ce51e14b3/draw.js&quot;&gt;draw.js&lt;/a&gt; file for function referenced throughout this section.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Jason Davies has implemented a &lt;a href=&quot;http://www.jasondavies.com/factorisation-diagrams/&quot;&gt;recursive solution in D3&lt;/a&gt; for this problem, which recursively calls the D3
draw function on subplots to rescale, transform and translate SVGs to achieve the desired visualization.  His implementation
is elegant and simple to understand, but has a slight drawback on restrictive animation of individual points and
transitions.&lt;/p&gt;

&lt;p&gt;I wanted to mimic the effect created by &lt;a href=&quot;http://www.datapointed.net/visualizations/math/factorization/animated-diagrams/&quot;&gt;Stephen Von Worley&lt;/a&gt;, which means that I have to generate all the data and its
attributes to allow D3 to work its transition magic on new and old data states.&lt;/p&gt;

&lt;p&gt;The ultimate challenge with this approach is to implement a way to describe the geometry, position, size, and angles of all
the points from an array of prime factors.&lt;/p&gt;

&lt;h3 id=&quot;generating-points&quot;&gt;Generating points&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p&gt;In this section, we will assume complete implementation of D3 visualization components (described in the next section) in
  order to provide a basis to focus the discussion solely on pseudocode and design of the function &lt;code&gt;generatePoints&lt;/code&gt;. 
  &lt;code&gt;generatePoints&lt;/code&gt; in turn guarantees a dataset of &lt;code&gt;point&lt;/code&gt; objects that D3 can rely on for visualization.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The first thing before we start is to ask what does D3 fundamentally require to do its job?&lt;/p&gt;

&lt;p&gt;I&amp;#39;m picturing the following D3 pseudocode for drawing a point:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;enter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;svg:circle&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;point&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;r&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Careful mental construction informs us that simply having knowledge on a point&amp;#39;s radius and Cartesian coordinates (&lt;code&gt;r&lt;/code&gt;, &lt;code&gt;x&lt;/code&gt;,
&lt;code&gt;y&lt;/code&gt;) would be sufficient conditions to handling the visualization.&lt;/p&gt;

&lt;p&gt;Given these minimal sufficient parameters, let us first build a helper function to create a &lt;code&gt;point&lt;/code&gt; object that we will be
reusing throughout this section.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// helper function to create a point&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We will use the number &lt;code&gt;180 = [4, 3, 3, 5]&lt;/code&gt; as a sample number in this section to help us organize our implementation for
&lt;code&gt;generatePoints&lt;/code&gt;.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Recall that we are treating &lt;code&gt;2 × 2&lt;/code&gt; as &lt;code&gt;4&lt;/code&gt; for purposes of visualization.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/datanaut/projects/d3-dances-with-factors/image-180.png&quot; alt=&quot;image-180&quot;&gt;&lt;/p&gt;

&lt;p&gt;We see that &lt;code&gt;180&lt;/code&gt; is constructed in rings of &lt;code&gt;5 -&amp;gt; 3 -&amp;gt; 3 -&amp;gt; 4&lt;/code&gt; (counting from outer rings to inner rings), which is exactly
the reverse order of the &lt;code&gt;factors&lt;/code&gt; array (&lt;code&gt;[4, 3, 3, 5]&lt;/code&gt;) that we generated with &lt;code&gt;primeFactors&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This suggests that we can utilize a loop going through elements in the array in reverse order to iteratively generate
points.  We would terminate the loop when we exhaust all factors in the array.&lt;/p&gt;

&lt;p&gt;A starting template for &lt;code&gt;generatePoints&lt;/code&gt; could look like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;cm&quot;&gt;/**
 * Generate and distribute points
 */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;generatePoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// initialize variables&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// build points from outwards&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// code to update x, y, r and create points&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With this template in place, we can try to express the other variables &lt;code&gt;x&lt;/code&gt;, &lt;code&gt;y&lt;/code&gt;, &lt;code&gt;r&lt;/code&gt; in terms of &lt;code&gt;n&lt;/code&gt; (i.e. &lt;code&gt;x&lt;/code&gt;, &lt;code&gt;y&lt;/code&gt;, &lt;code&gt;r&lt;/code&gt;,
are functions of &lt;code&gt;n&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;We first notice that the &lt;code&gt;r&lt;/code&gt; should be divided by some factor of &lt;code&gt;n&lt;/code&gt; to allow us to fit &lt;code&gt;n&lt;/code&gt; points within a unit area. 
Let&amp;#39;s assume for simplicity that &lt;code&gt;r&lt;/code&gt; as a function of &lt;code&gt;n&lt;/code&gt; can be written as:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next, we observe that &lt;code&gt;n&lt;/code&gt; represents the number of vertices of a subgroup, which will allow us to evenly generate angles &lt;code&gt;a&lt;/code&gt;
to radially distribute the points.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;From basic trigonometry, we know that &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; can be calculated as a function of the angle &lt;code&gt;a&lt;/code&gt;:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/datanaut/projects/d3-dances-with-factors/image-trig.gif&quot; alt=&quot;image-trig&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We now have a complete set of generated values &lt;code&gt;x&lt;/code&gt;, &lt;code&gt;y&lt;/code&gt;, and &lt;code&gt;r&lt;/code&gt; that satisfies our minimum requirements for plotting
points.  We can now create a &lt;code&gt;point&lt;/code&gt; object using our helper function &lt;code&gt;createPoint(r, x, y)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;To recap, &lt;code&gt;generatePoints&lt;/code&gt; now looks something along the lines of:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;generatePoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// initialize variables&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// build points from outwards&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// scale r smaller by n each loop iteration&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// loop through each vertex&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// calculate the angle of the point&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// update x&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// update y&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// create point object&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// add to points&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If we try to plot these generated points with D3, we notice something terribly wrong:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;We are only generating a total of &lt;code&gt;4 + 3 + 3 + 5 = 15&lt;/code&gt; points when we need to generate &lt;code&gt;180 = 4 * 3 * 3 * 5&lt;/code&gt; points.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;We need to somehow build points from the outer set of points and for each of those points, multiply out the inner points
recursively.&lt;/p&gt;

&lt;p&gt;We can achieve this through the use of a temporary variable &lt;code&gt;parentPoints&lt;/code&gt;, which holds a list of all current points in the
loop that provide a reference to build out more points for each of the parent points.  Our general while loop needs to
account if we are on the outer loop or within the recursive inner loop, and this can be implemented by providing a check on
&lt;code&gt;points.length == 0&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;generatePoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;parentPoints&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// account for first set of points&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// if we enter the inner loop, we need to create points based on parent points&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;parentPoints&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// create shallow copy of points&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// reset points array;&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;parentPoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// build new points using parentPoints as a template&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;da&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When we check &lt;code&gt;points.length&lt;/code&gt; in the JavaScript console, we see that the dimension of the array now matches up correctly to
the number, but a quick look at the visualization shows that the dimensions are all wrong!  Here&amp;#39;s what it would look like
for &lt;code&gt;180&lt;/code&gt; based on our current implementation of &lt;code&gt;generatePoints&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/datanaut/projects/d3-dances-with-factors/image-180-wrong.png&quot; alt=&quot;image-180-wrong&quot;&gt;&lt;/p&gt;

&lt;p&gt;A number of things are clearly wrong at this point.  We notice that the points are all stacked on each other when they
should be fanning out from their parent points.  The radius scaling is also not correct.&lt;/p&gt;

&lt;p&gt;The immediate fix we should make lies in the generation of child points from parent points.  We notice that the general
trigonometry formulas don&amp;#39;t quite work:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The new child points need to be drawn with the parent point&amp;#39;s location as a frame of reference.  Luckily, we have access to
this from the &lt;code&gt;parentPoint&lt;/code&gt; object that we created.  A simple change here will be to specify the &lt;code&gt;parentPoint&lt;/code&gt; location as
the frame of reference:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;parentPoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;da&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;parentPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// refer to x position of parentPoint;&lt;/span&gt;
     &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;parentPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// refer to y position of parentPoint;&lt;/span&gt;
     &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
     &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you are still paying attention, you noticed that we have introduced a variable &lt;code&gt;d&lt;/code&gt;, which represents the depth factor
that we need to scale as we enter each recursive loop.  This scale factor should depend on &lt;code&gt;n&lt;/code&gt; since every time we arrive at
a nested set of &lt;code&gt;n&lt;/code&gt; vertices, we should scale all our dimensions down by a factor of &lt;code&gt;n&lt;/code&gt;.  We will introduce &lt;code&gt;d&lt;/code&gt; at the very
start of our &lt;code&gt;while&lt;/code&gt; loop.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;generatePoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;parentPoints&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// initiate d&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// initiate n&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// scale d by n&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

        &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;  
      &lt;span class=&quot;nx&quot;&gt;parentPoints&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;parentPoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;da&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;parentPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// d applied on child point&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;parentPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now testing our visualization in D3 yields something that looks much more decent:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/datanaut/projects/d3-dances-with-factors/image-180-wrong2.png&quot; alt=&quot;image-180-wrong2&quot;&gt;&lt;/p&gt;

&lt;p&gt;We notice that there are slight issues with the orientation/rotation or our current visualization.  We will leave this for
the user to confirm that a simple introduction of an offset variable &lt;code&gt;da&lt;/code&gt; (which is also a function of &lt;code&gt;n&lt;/code&gt;) can help fix
this problem.  In general, the offset should be set as:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;code&gt;da = -Math.PI / 4&lt;/code&gt; when &lt;code&gt;n == 4&lt;/code&gt; (i.e. rotate 90 degrees)&lt;/li&gt;
&lt;li&gt;  &lt;code&gt;da = 0&lt;/code&gt; when &lt;code&gt;n == 2&lt;/code&gt; (i.e. keep at default 0 degrees)&lt;/li&gt;
&lt;li&gt;  &lt;code&gt;da = -Math.PI / 2&lt;/code&gt; otherwise (i.e. rotate 180 degrees)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Applying the introduction of the &lt;code&gt;da&lt;/code&gt; variable and including this as part of the construction of the angle &lt;code&gt;a&lt;/code&gt; yields us our
finalized formulation of the function &lt;code&gt;generatePoints&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;cm&quot;&gt;/**
 * Generate and distribute points
 */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;generatePoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;parentPoints&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;da&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// scale depth&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// build points from outwards&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;da&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// apply offset logic here&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// aesthetic scale factor to increase size at higher values of n&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// account for first set of points&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;da&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// apply offset da to angle a&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// iteratively build points by keeping track of parentPoints&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;parentPoints&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;parentPoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;da&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// apply offset da to angle a&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;parentPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;parentPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And our visualization is now looking right and great.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/datanaut/projects/d3-dances-with-factors/image-180.png&quot; alt=&quot;image-180&quot;&gt;&lt;/p&gt;

&lt;p&gt;That was a heavy section, so let&amp;#39;s wrap it up in a quick summary:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  Find a way to generate variables &lt;code&gt;x&lt;/code&gt;, &lt;code&gt;y&lt;/code&gt;, &lt;code&gt;r&lt;/code&gt; (minimal plotting requirements) from knowledge on the &lt;code&gt;factors&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;  array.&lt;/li&gt;
&lt;li&gt;  The &lt;code&gt;factors&lt;/code&gt; array encodes information on &lt;code&gt;n&lt;/code&gt; vertices, which we found ways to express &lt;code&gt;x(n)&lt;/code&gt;, &lt;code&gt;y(n)&lt;/code&gt;, &lt;code&gt;r(n)&lt;/code&gt;,&lt;/li&gt;
&lt;li&gt;  &lt;code&gt;a(n)&lt;/code&gt;, &lt;code&gt;d(n)&lt;/code&gt;, &lt;code&gt;da(n)&lt;/code&gt; as functions of &lt;code&gt;n&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;  We break the generation of points into an generating an initial set of outer points, followed by a recursive logic&lt;/li&gt;
&lt;li&gt;  of generating nested inner points while applying the neccessary depth scaling factors.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;visualization-components&quot;&gt;Visualization components&lt;/h3&gt;

&lt;p&gt;In the previous section, we made &amp;quot;invisible&amp;quot; mention and displayed images to the visualization without describing its
implementation.  The goal of the previous section was to focus only on the logic of generating the right &lt;code&gt;points&lt;/code&gt; data that
D3 can use for plotting.&lt;/p&gt;

&lt;p&gt;The goal of this section is to now build on how we inform D3 to take the &lt;code&gt;points&lt;/code&gt; data and plot the results.&lt;/p&gt;

&lt;p&gt;At the highest of level, our visualization application should run with three simple calls:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// initiate vis object&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{};&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// call an initialization function to build vis&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;  

&lt;span class=&quot;c1&quot;&gt;// setup an interval reference to update based on a set speed&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;speed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can see this simple call at the top of the &lt;a href=&quot;https://gist.githubusercontent.com/chrisrzhou/3fec15b05684fa0cf42e/raw/c57df3d28276ae2affa786a408fd042ce51e14b3/draw.js&quot;&gt;draw.js&lt;/a&gt; file.  What remains now is to implement &lt;code&gt;init&lt;/code&gt; and &lt;code&gt;update&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;There are a number of things we should initialize in the &lt;code&gt;vis&lt;/code&gt; object:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;code&gt;vis.size&lt;/code&gt;: size of the SVG&lt;/li&gt;
&lt;li&gt;  &lt;code&gt;vis.speed&lt;/code&gt;: to determine how fast &lt;code&gt;setInterval&lt;/code&gt; calls &lt;code&gt;update&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;  &lt;code&gt;vis.number&lt;/code&gt;: the number to be factorized and visualized&lt;/li&gt;
&lt;li&gt;  &lt;code&gt;vis.factors&lt;/code&gt;: the factor array for &lt;code&gt;vis.number&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;  &lt;code&gt;vis.points&lt;/code&gt;: the points generated when &lt;code&gt;vis.factors&lt;/code&gt; is passed into the &lt;code&gt;generatePoints&lt;/code&gt; i.e. the function we wrote
in the previous section&lt;/li&gt;
&lt;li&gt;  &lt;code&gt;vis.scale&lt;/code&gt;: the scale and domain range of the visualization&lt;/li&gt;
&lt;li&gt;  &lt;code&gt;vis.svg&lt;/code&gt;: the main SVG object that D3 will build upon&lt;/li&gt;
&lt;li&gt;  &lt;code&gt;vis.trackerNumber&lt;/code&gt;: the number that we will display in the visualization&lt;/li&gt;
&lt;li&gt;  &lt;code&gt;vis.trackerFactors&lt;/code&gt;: the string representation of the factorization of &lt;code&gt;vis.number&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Following the above requirements, here is our implementation for the &lt;code&gt;init&lt;/code&gt; function:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// vis parameters&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;speed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// get prime factors&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;primeFactors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// build data points&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;generatePoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// build scale&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;linear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;domain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// build vis svg&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;svg&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#vis&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;svg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;height&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;width&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;g&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;transform&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;translate(&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// build vis tracker number&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;trackerNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;svg&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;svg:text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;trackerNumber&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;y&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;font-size&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;30px&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;fill&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;gray&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// build vis tracker factors&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;trackerFactors&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;svg&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;svg:text&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;trackerFactors&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;x&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;y&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;font-size&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;14px&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;fill&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;gray&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The next section is to help build the logic of our &lt;code&gt;update&lt;/code&gt; function, which will be repeatedly called by &lt;code&gt;setInterval&lt;/code&gt; to
update numbers and the visualization.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;update&lt;/code&gt; should handle:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  updating &lt;code&gt;vis.number&lt;/code&gt; and &lt;code&gt;vis.factors&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;  regenerate &lt;code&gt;vis.points&lt;/code&gt; when &lt;code&gt;vis.factors&lt;/code&gt; is updated.&lt;/li&gt;
&lt;li&gt;  update &lt;code&gt;vis.colorScale&lt;/code&gt; since we have to update our color domain range due to changing array size.&lt;/li&gt;
&lt;li&gt;  apply transition effects for new data, old data, shifting data&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;We will first handle updates to &lt;code&gt;vis.number&lt;/code&gt;, &lt;code&gt;vis.factors&lt;/code&gt;, &lt;code&gt;vis.points&lt;/code&gt;, and &lt;code&gt;vis.colorScale&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;cm&quot;&gt;/**
 * Update function for setInterval
 */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// extend functino with the option to pass a direction&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// to either increment or decrement vis.number&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// i.e. if true, increase vis.number, if false, decrease vis.number&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;pos&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;--&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;primeFactors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// update factors&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// update tracker&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;trackerNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;transition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;trackerFactors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;transition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;printFactors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// update points&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;generatePoints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;factors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// create new points&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// make a reference to each point object&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;svg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;selectAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;.point&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// update colorscale&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colorScale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;linear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;domain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// rescale since vis.points.length has changed&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#1f77b4&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;#d62728&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;updates-and-transitions&quot;&gt;Updates and transitions&lt;/h3&gt;

&lt;p&gt;In the earlier section, we made a D3 selection reference to &lt;code&gt;point&lt;/code&gt; in the &lt;code&gt;update&lt;/code&gt; function i.e.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;svg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;selectAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;.point&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can now build on this selection and construct &lt;code&gt;enter&lt;/code&gt;, &lt;code&gt;exit&lt;/code&gt;, &lt;code&gt;transition&lt;/code&gt; animations:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;cm&quot;&gt;/**
 * Update function for setInterval
 */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;svg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;selectAll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;.point&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;points&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// enter&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;enter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;svg:circle&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;classed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;point&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;r&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;transition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;duration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;speed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;r&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// scale radius of data point with size of vis&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// apply vis.scales to x and y&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;fill&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colorScale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// apply vis.colorScale to index of data points&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// update&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;transition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;duration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;speed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;r&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cx&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;fill&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;colorScale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;//exit&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;transition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;duration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;speed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;r&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We are now done with our implementation of &lt;code&gt;init&lt;/code&gt; and &lt;code&gt;update&lt;/code&gt; and we can initialize our D3 visualization with three simple
calls!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{};&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;speed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;adding-user-interactions&quot;&gt;Adding User Interactions&lt;/h2&gt;

&lt;p&gt;We can provide a few interactive options for the users without overcomplicating our D3 code by initiating these interactions
in the &lt;code&gt;init&lt;/code&gt; function, and pausing and resetting &lt;code&gt;intervals&lt;/code&gt; with the use of &lt;code&gt;setInterval&lt;/code&gt; and &lt;code&gt;clearInterval&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s build out the set of HTML widget controls and tag them with unique &lt;code&gt;ids&lt;/code&gt; so D3 can select and reference them:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- controls --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;btn-group controls&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;input&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;number&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;btn btn-default btn-sm&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;title=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Input a number&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;inputNumber&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;btn btn-default btn-sm&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;title=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Search&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;search&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;i&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;fa fa-search&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;btn btn-default btn-sm&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;title=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Backward&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;backward&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;i&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;fa fa-chevron-left&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;btn btn-default btn-sm&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;title=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Stop&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;stop&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;i&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;fa fa-stop&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;btn btn-default btn-sm&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;title=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Forward&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;forward&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;i&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;fa fa-chevron-right&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note that we are using an icon set &lt;code&gt;&amp;lt;i&amp;gt;&amp;lt;/i&amp;gt;&lt;/code&gt; from &lt;a href=&quot;http://fortawesome.github.io/Font-Awesome/&quot;&gt;Font Awesome&lt;/a&gt; to help add some visuals to our widget :)&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s now move from the HTML workstation to JavaScript.&lt;/p&gt;

&lt;h3 id=&quot;stop&quot;&gt;Stop&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#stop&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// select by id&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;click&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// clear interval&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;forward&quot;&gt;Forward&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#forward&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// select by id&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;click&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// clear interval&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;speed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// reinitialize interval&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note that we are passing the parameter &lt;code&gt;true&lt;/code&gt; to &lt;code&gt;update&lt;/code&gt;, which sets &lt;code&gt;vis.number&lt;/code&gt; to increment each time &lt;code&gt;update&lt;/code&gt; is
called.&lt;/p&gt;

&lt;h3 id=&quot;backward&quot;&gt;Backward&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#backward&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// select by id&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;click&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// clear interval&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;speed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// reinitialize interval&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note that we are passing the parameter &lt;code&gt;false&lt;/code&gt; to &lt;code&gt;update&lt;/code&gt;, which sets &lt;code&gt;vis.number&lt;/code&gt; to decrement each time &lt;code&gt;update&lt;/code&gt; is
called.&lt;/p&gt;

&lt;h3 id=&quot;search&quot;&gt;Search&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;d3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#search&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// select by id&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;click&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;inputNumber&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// update vis.number&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;clearInterval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// clear interval&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// call update once&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For the &lt;code&gt;search&lt;/code&gt; implementation, we assume that the user is prompted to pause and reflect on their searched result.  We
achieve this by stopping the &lt;code&gt;interval&lt;/code&gt; using &lt;code&gt;clearInterval&lt;/code&gt;, and making one manual call to &lt;code&gt;update&lt;/code&gt; to visualize the
desired result.&lt;/p&gt;

&lt;p&gt;One small thing to pay attention is that &lt;code&gt;update&lt;/code&gt; alters &lt;code&gt;vis.number&lt;/code&gt;, so we have to pass it &lt;code&gt;n - 1&lt;/code&gt; if we wish to visualize
&lt;code&gt;n&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;vis&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;inputNumber&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;where we have used generic JavaScript to obtain the &lt;code&gt;value&lt;/code&gt; of the HTML &lt;code&gt;&amp;lt;input/ &amp;gt;&lt;/code&gt; tag.&lt;/p&gt;

&lt;p&gt;And there you have it: user interactivity to &lt;code&gt;stop&lt;/code&gt;, &lt;code&gt;forward&lt;/code&gt;, &lt;code&gt;backward&lt;/code&gt;, and &lt;code&gt;search&lt;/code&gt; visualizations of various numbers.&lt;/p&gt;

&lt;p&gt;Go ahead and test it out!&lt;/p&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;samples&quot;&gt;Samples&lt;/h2&gt;

&lt;p&gt;Here&amp;#39;s a collection of interesting and beautiful samples.  Feel free to explore and share any insightful ones you find in
the comments below.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/datanaut/projects/d3-dances-with-factors/image-243.png&quot; alt=&quot;image-243&quot;&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/datanaut/projects/d3-dances-with-factors/image-625.png&quot; alt=&quot;image-625&quot;&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/datanaut/projects/d3-dances-with-factors/image-1024.png&quot; alt=&quot;image-1024&quot;&gt;&lt;/p&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#samples&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;

&lt;p&gt;This work would not be possible without the original creative ideas and implementations made by others.  I hope that my
tutorial and implementation will spark interest in many others to share and expand on the foundations built for us.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;https://gist.github.com/chrisrzhou/3fec15b05684fa0cf42e&quot;&gt;Github source code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://mathlesstraveled.com/2012/10/05/factorization-diagrams/&quot;&gt;Brent Yorgey&amp;#39;s original idea&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://www.datapointed.net/visualizations/math/factorization/animated-diagrams/&quot;&gt;Stephen Von Worley&amp;#39;s interactive version&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://www.jasondavies.com/factorisation-diagrams/&quot;&gt;Jason Davies&amp;#39; recursive D3 implementation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://en.wikipedia.org/wiki/Sierpinski_triangle&quot;&gt;Sierpinski Triangle&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://bl.ocks.org/mbostock/3808234&quot;&gt;Mike Bostock&amp;#39;s General Update Pattern&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Thanks for viewing!&lt;/p&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;!-- external links --&gt;

&lt;!-- image links --&gt;
</description>
        <pubDate>Sun, 22 Feb 2015 10:56:00 +0000</pubDate>
        <link>http://localhost:4000/blog/tutorials/2015/02/22/dances-with-factors-tutorial</link>
        <guid isPermaLink="true">http://localhost:4000/blog/tutorials/2015/02/22/dances-with-factors-tutorial</guid>
        
        <category>D3.js</category>
        
        <category>primes</category>
        
        <category>math</category>
        
        
        <category>tutorials</category>
        
      </item>
    
      <item>
        <title>Finalizing Site</title>
        <description>&lt;h2 id=&quot;styles-and-images&quot;&gt;Styles and Images&lt;/h2&gt;

&lt;p&gt;I&amp;#39;ve made some huge styling updates to the site, and spent a night drawing some simple ink-drawings that I&amp;#39;m using 
throughout the site.  I will probably be adding more images and background-borders in the future.&lt;/p&gt;

&lt;h2 id=&quot;todos&quot;&gt;TODOs&lt;/h2&gt;

&lt;p&gt;As of today&amp;#39;s writing, I wrote a TODOs list for what&amp;#39;s remaining on the site:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;[x] Finalize Styles&lt;/li&gt;
&lt;li&gt;[x] Draw ink images&lt;/li&gt;
&lt;li&gt;[x] Update resume&lt;/li&gt;
&lt;li&gt;[x] Set up blog sections by categories&lt;/li&gt;
&lt;li&gt;[x] Set up blog tags&lt;/li&gt;
&lt;li&gt;[ ] Set up pagination for blogs/collections (&lt;em&gt;waiting for this to be incorporated into Jeklly collections&lt;/em&gt;)&lt;/li&gt;
&lt;li&gt;[ ] Create Project sections by Language&lt;/li&gt;
&lt;li&gt;[ ] Create Art section&lt;/li&gt;
&lt;li&gt;[ ] Create People/Influence section&lt;/li&gt;
&lt;li&gt;[ ] Create Updates/Site in &lt;code&gt;index.html&lt;/code&gt; (bring in blog and project updates).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;http://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; currently lacks some flexibility in &lt;code&gt;paginators&lt;/code&gt;.  It is currently not possible, without the use of a plugin
to paginate collections or subsets of posts in multiple pages.  I think there&amp;#39;s some development going on Github on 
expanding their &lt;code&gt;paginators&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;whats-next&quot;&gt;What&amp;#39;s next&lt;/h2&gt;

&lt;p&gt;I have spent the last 5 weeks really digging into Jekyll and working on the skeleton of the site.  The main backbone 
is now functional, so I should &lt;strong&gt;FINALLY&lt;/strong&gt; have time again to start working on some visualizations!&lt;/p&gt;

&lt;p&gt;Here&amp;#39;s a very inspirational collection of projects and visualizations by &lt;a href=&quot;http://www.makinguse.com/&quot;&gt;Carlo Zapponi&lt;/a&gt;.  The &lt;a href=&quot;http://bolid.es/&quot;&gt;bolides&lt;/a&gt; 
visualization of meteorites is fascinating, and is something I&amp;#39;ll definitely work on in the future on some similar 
ideas e.g. disease incidence and death rates.&lt;/p&gt;

&lt;p&gt;Until then, signing off!&lt;/p&gt;

&lt;!-- links --&gt;
</description>
        <pubDate>Fri, 13 Feb 2015 02:00:00 +0000</pubDate>
        <link>http://localhost:4000/blog/site/2015/02/13/finalizing-site</link>
        <guid isPermaLink="true">http://localhost:4000/blog/site/2015/02/13/finalizing-site</guid>
        
        <category>css</category>
        
        <category>ink-drawings</category>
        
        
        <category>site</category>
        
      </item>
    
      <item>
        <title>R Shiny Power to Choose Writeup</title>
        <description>&lt;h2 id=&quot;interactive-project-link&quot;&gt;&lt;a href=&quot;http://shiny.vis.datanaut.io/PowerToChoose/&quot;&gt;Interactive Project Link&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;This is a data analysis writeup (as of 02/09/14) for the R &lt;a href=&quot;http://shiny.rstudio.com/&quot;&gt;Shiny&lt;/a&gt; application - &lt;strong&gt;Power to Choose (PTC)&lt;/strong&gt;, built to
visualize &lt;em&gt;up-to-date&lt;/em&gt; electricity plans and prices in the &lt;a href=&quot;http://www.ercot.com/&quot;&gt;ERCOT&lt;/a&gt; utility market.&lt;/p&gt;

&lt;p&gt;The project is hosted on an AWS EC2 instance and all code and implementation is open-source and made available on 
&lt;a href=&quot;https://github.com/chrisrzhou/RShiny-PowerToChoose&quot;&gt;Github&lt;/a&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;#summary&quot;&gt;Summary&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;#what-is-ptc&quot;&gt;What is PTC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#how-to-use-ptc&quot;&gt;How to use PTC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#what-is-lacking-on-ptc&quot;&gt;What is lacking on PTC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#personal-thoughts&quot;&gt;Personal thoughts&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#ptc-rankings&quot;&gt;PTC Rankings&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;#cheap-providers&quot;&gt;Cheap providers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#conclusion-about-reps&quot;&gt;Conclusion about REPs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#cheap-is-subjective&quot;&gt;Cheap is subjective&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#ptc-market&quot;&gt;PTC Market&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;#aggregating-the-data&quot;&gt;Aggregating the data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#adjusting-binwidths&quot;&gt;Adjusting Binwidths&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#data&quot;&gt;Data&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;#data-source&quot;&gt;Data Source&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#data-scraping&quot;&gt;Data Scraping&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#data-munging&quot;&gt;Data Munging&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#resources&quot;&gt;Resources&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;

&lt;h3 id=&quot;what-is-ptc&quot;&gt;What is PTC&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://www.powertochoose.org/&quot;&gt;Power to Choose&lt;/a&gt; (PTC) is a consumer choice website set up by the &lt;a href=&quot;https://www.puc.texas.gov/&quot;&gt;PUC&lt;/a&gt; to provide customers a competitive platform to
compare electricity plans and offers in Texas.&lt;/p&gt;

&lt;p&gt;The native presentation of the data is in the form of an interactive table with search/filter widgets.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-PowerToChoose/native.png&quot; alt=&quot;image-native&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;how-to-use-ptc&quot;&gt;How to use PTC&lt;/h3&gt;

&lt;p&gt;The general use of PTC is to quickly compare estimated prices at monthly usage thresholds (&lt;code&gt;500kWh&lt;/code&gt;, &lt;code&gt;1000kWh&lt;/code&gt;, &lt;code&gt;2000kWh&lt;/code&gt;). 
The various Electricity Facts Label (EFL) price values corresponds to these usage thresholds.&lt;/p&gt;

&lt;p&gt;From the main interface shown above, a user can gather information about companies, plans and pricing details.  They can use
the filter widgets on the left to filter data they want to see (e.g. specifying a price range or contract length range).&lt;/p&gt;

&lt;h3 id=&quot;what-is-lacking-on-ptc&quot;&gt;What is lacking on PTC&lt;/h3&gt;

&lt;p&gt;The native PTC app is great for consumers to compare prices, but it is unable to display the information completely in one
visualization i.e. the data is paginated and makes it difficult to ask questions on specific ranges and subsets.&lt;/p&gt;

&lt;p&gt;The design of this application is to help empower &lt;em&gt;both consumers and analysts&lt;/em&gt; with complete visualization of the
data/market, through the use of histograms and scatterplots that are interactively updated based on user inputs.&lt;/p&gt;

&lt;p&gt;For instance, all the data on PTC can be visualized concisely as a scatterplot sorted by price and REP rank.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-PowerToChoose/scatterplot.png&quot; alt=&quot;image-scatterplot&quot;&gt;&lt;/p&gt;

&lt;p&gt;And with the help on the filters widgets on the left,&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-PowerToChoose/widgets.png&quot; alt=&quot;image-widgets&quot;&gt;&lt;/p&gt;

&lt;p&gt;We can get real-time updates and full control of the dataset we wish to study.  These widgets provide useful customization of
the visualizations, some of which are listed below:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;strong&gt;Changing the dataset&lt;/strong&gt; e.g. changing TDU company or usage values&lt;/li&gt;
&lt;li&gt;  &lt;strong&gt;Subsetting the data&lt;/strong&gt; e.g. selecting checkboxes&lt;/li&gt;
&lt;li&gt;  &lt;strong&gt;Highlighting data records&lt;/strong&gt; e.g. highlighting REPs&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The writeup will go into detailed analysis on some of the more interesting findings in the visualization sections.  An
in-depth overview on data gathering, cleaning, and transformation of the original datasets will be outlined in 
the &lt;a href=&quot;#data&quot;&gt;Data&lt;/a&gt; section.&lt;/p&gt;

&lt;p&gt;At any time, feel free to experiment and draw your own conclusions with the interactive web application and refer to
the &lt;code&gt;.R&lt;/code&gt; files found on the &lt;a href=&quot;https://github.com/chrisrzhou/RShiny-PowerToChoose&quot;&gt;Github&lt;/a&gt; project site if you need details on code implementation.&lt;/p&gt;

&lt;h2 id=&quot;personal-thoughts&quot;&gt;Personal thoughts&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;With great marketing power and choices, comes great responsibility.  Unfortunately, &amp;quot;cheap&amp;quot; prices may not always be the
  best deals on PTC.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Note that the existence of 3 usage-level pricing (&lt;code&gt;500kWh&lt;/code&gt;, &lt;code&gt;1000kWh&lt;/code&gt;, &lt;code&gt;2000kWh&lt;/code&gt;) is one of the main drivers for the
diversity of products that can be designed and created in the Texas electricity market.&lt;/p&gt;

&lt;p&gt;For instance, a retail electric provider (REP) can offer a product which incurs additional charges if usage is below 800kWh.
This causes the &lt;code&gt;500kWh&lt;/code&gt; price to look unfavorable but the &lt;code&gt;1000kWh&lt;/code&gt; and &lt;code&gt;2000kWh&lt;/code&gt; prices to look much more favorable, which
would help cater to customers who are shopping at higher usage price points.&lt;/p&gt;

&lt;p&gt;However, this is also misinformation to an average customer who does not spend time using the filter/sorting widgets on the
site (since the default sorting on PTC is at &lt;code&gt;1000kWh&lt;/code&gt;).  Many companies have, and are still abusing this fact to create
attractive but misleading prices.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;My hope is that this walkthrough and application will help the general user be more informed about the choices they make.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;sub&gt;(back to &lt;a href=&quot;#contents&quot;&gt;contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;ptc-rankings&quot;&gt;PTC Rankings&lt;/h2&gt;

&lt;h3 id=&quot;cheap-providers&quot;&gt;Cheap providers&lt;/h3&gt;

&lt;p&gt;In the &lt;code&gt;Rankings&lt;/code&gt; tab of the application, there is a scatterplot that effectively displays the price spread by REP.  The
scatterplot is sorted by REP in descending price, so the cheapest provider will always be displayed on the &lt;em&gt;top-left&lt;/em&gt; section
of the map.&lt;/p&gt;

&lt;p&gt;By selecting a specified usage value, and highlighting a few retail electric providers (REP) of interest, we can get a quick
view on the prices in the selected market.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-PowerToChoose/scatterplot.png&quot; alt=&quot;image-scatterplot&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;conclusion-about-reps&quot;&gt;Conclusion about REPs&lt;/h3&gt;

&lt;p&gt;This plot gives a quick indication on the price spread in the market and a sense on the &amp;quot;potential roles&amp;quot; of various REP in
the market.  We identify some interesting clusters:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-PowerToChoose/scatterplot-comments.png&quot; alt=&quot;image-scatterplot-comments&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;strong&gt;Cheap&lt;/strong&gt;: Only a few REPs are low-price providers.&lt;/li&gt;
&lt;li&gt;  &lt;strong&gt;Market median&lt;/strong&gt;: Most REPS are clustered around the market-consolidated median price.&lt;/li&gt;
&lt;li&gt;  &lt;strong&gt;Spammer&lt;/strong&gt;: REPs that offer many plans are what I call &lt;em&gt;&amp;quot;PTC-spammers&amp;quot;&lt;/em&gt;.  This could be a viable technique to
overpopulate their plans more frequently across the site for a chance of customers enrolling by accident.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In addition to deriving information from the scatterplot, I have created a short &lt;code&gt;Summary&lt;/code&gt; section that provides useful
statistics on the selected dataset/market (e.g. &lt;code&gt;Best&lt;/code&gt;, &lt;code&gt;Top 10&lt;/code&gt;, &lt;code&gt;Top 30&lt;/code&gt;, &lt;code&gt;Mean&lt;/code&gt;, &lt;code&gt;Top 10 REPS&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-PowerToChoose/summary.png&quot; alt=&quot;image-summary&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;cheap-is-subjective&quot;&gt;Cheap is subjective&lt;/h3&gt;

&lt;p&gt;Just as we mentioned earlier that REPs are able to create products that look seemingly cheap at a specified EFL usage
(usually at &lt;code&gt;1000kWh&lt;/code&gt; which is the default price sorting at PTC), we need to be careful on the price ranks of these
companies, and make sure that the market that we carved out using the widget selections and filtering is indeed the subset of
electricity plans we are interested in looking at.&lt;/p&gt;

&lt;p&gt;For example, with a &lt;strong&gt;default&lt;/strong&gt; PTC selection viewing all plans at &lt;strong&gt;&lt;code&gt;1000kWh&lt;/code&gt;&lt;/strong&gt;, the cheapest providers are &lt;code&gt;SPARK&lt;/code&gt;,
&lt;code&gt;CIRRO&lt;/code&gt;, &lt;code&gt;GEXA&lt;/code&gt;, &lt;code&gt;STARTEX&lt;/code&gt; (see below).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-PowerToChoose/scatterplot.png&quot; alt=&quot;image-scatterplot&quot;&gt;&lt;/p&gt;

&lt;p&gt;However, selecting criteria for &lt;strong&gt;100% renewable energy&lt;/strong&gt; and a &lt;strong&gt;usage level of &lt;code&gt;2000kWh&lt;/code&gt;&lt;/strong&gt; leads to a different ranking of
cheapest providers, which are now listed as &lt;code&gt;BREEZE&lt;/code&gt;, &lt;code&gt;GREEN MOUNTAIN&lt;/code&gt;, &lt;code&gt;4CHANGE&lt;/code&gt; (see below)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-PowerToChoose/scatterplot-renewables.png&quot; alt=&quot;image-scatterplot-renewable&quot;&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Author&amp;#39;s note: Make sure that price is not the only criteria you are shopping with!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;sub&gt;(back to &lt;a href=&quot;#contents&quot;&gt;contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;ptc-market&quot;&gt;PTC Market&lt;/h2&gt;

&lt;h3 id=&quot;aggregating-the-data&quot;&gt;Aggregating the data&lt;/h3&gt;

&lt;p&gt;Our previous scatterplot information can be aggregated into price buckets to get a more natural feel for the market (if we
are not concerned with details of individual companies).  Here&amp;#39;s the same results, as displayed in the &lt;code&gt;Market&lt;/code&gt; tab of the
application, when we choose to use a histogram instead of a scatterplot.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-PowerToChoose/histogram.png&quot; alt=&quot;image-histogram&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;adjusting-binwidths&quot;&gt;Adjusting Binwidths&lt;/h3&gt;

&lt;p&gt;By simply adjusting the binwidth with the widget, we can reallocate the data in the histogram to a wider binwidth.  The
following histogram shows the same data plotted with a price binwidth of 1.0c/kWh as opposed to 0.2c/kWh used in the previous
histogram.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-PowerToChoose/histogram-large-bin.png&quot; alt=&quot;image-histogram-large-bin&quot;&gt;&lt;/p&gt;

&lt;p&gt;This wraps up the data visualization sections of the web application.  These interactive and dynamic visualizations are made
possible by &lt;code&gt;ggvis&lt;/code&gt;, which is a new library being developed by Hadley Wickham.  &lt;code&gt;ggvis&lt;/code&gt; is a relatively new library, so a lot
of the methods and visualizations are limited in use, and are somewhat difficult to generate at a higher customized level.
At this point, I would recommend using &lt;code&gt;ggplot2&lt;/code&gt; over &lt;code&gt;ggvis&lt;/code&gt;, but this application was an experiment in trying out the new
visualization library that Hadley is working on :)&lt;/p&gt;

&lt;p&gt;&lt;sub&gt;(back to &lt;a href=&quot;#contents&quot;&gt;contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;data&quot;&gt;Data&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;This section provides details on the data source and processes that go towards scraping and munging the initial 
  unorganized data into a consolidated R dataframe that is used in the Shiny app.  We will make references to the 
  files on the &lt;a href=&quot;https://github.com/chrisrzhou/RShiny-PowerToChoose&quot;&gt;Github&lt;/a&gt; project.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;All data is owned by the &lt;a href=&quot;http://www.powertochoose.org/&quot;&gt;Power to Choose&lt;/a&gt; made available by the &lt;a href=&quot;https://www.puc.texas.gov/&quot;&gt;PUC&lt;/a&gt;.  I am not affiliated with the PUC, and this
writeup and application is purely for practicing and sharing thoughts behind data management and visualization.&lt;/p&gt;

&lt;p&gt;If you are not interested in the data background and processes, feel free to jump back to the visualization sections!&lt;/p&gt;

&lt;h3 id=&quot;data-source&quot;&gt;Data Source&lt;/h3&gt;

&lt;p&gt;The PTC data is conveniently provided as a organized csv download file accessed from
&lt;a href=&quot;http://www.powertochoose.org/en-us/Plan/ExportToCsv&quot;&gt;http://www.powertochoose.org/en-us/Plan/ExportToCsv&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For the remainder of the data walkthrough, we will work with files in the &lt;a href=&quot;https://github.com/chrisrzhou/RShiny-PowerToChoose&quot;&gt;Github&lt;/a&gt; repository.&lt;/p&gt;

&lt;p&gt;But first, let&amp;#39;s scrape the data!&lt;/p&gt;

&lt;h3 id=&quot;data-scraping&quot;&gt;Data Scraping&lt;/h3&gt;

&lt;p&gt;Open the &lt;code&gt;/data/data.R&lt;/code&gt; file and let&amp;#39;s build a quick function for pulling the data from the URL:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-R&quot; data-lang=&quot;R&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# get_df helper function
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Get raw dataframe
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# @return: raw dataframe returned by read.csv from provided url.
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://www.powertochoose.org/en-us/Plan/ExportToCsv&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read.csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;header&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringsAsFactors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clean&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can now call and store the results of &lt;code&gt;get_df&lt;/code&gt; into a dataframe by:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-R&quot; data-lang=&quot;R&quot;&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;At this point, the data that we read in has native column headers and wrong data types (most of them are converted to
&lt;code&gt;string&lt;/code&gt; when we used the &lt;code&gt;stringsAsFactors=FALSE&lt;/code&gt; to avoid conversions to the &amp;quot;difficult-to-deal-with&amp;quot; &lt;code&gt;factors&lt;/code&gt; object type
in R).&lt;/p&gt;

&lt;p&gt;We now tidy the dataframe &lt;code&gt;df&lt;/code&gt; using Hadley Wickham&amp;#39;s awesome &lt;a href=&quot;http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html&quot;&gt;dplyr&lt;/a&gt; library for very clean execution of R data
manipulations written in concise and readable syntax.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The rest of the data section assumes elementary knowledge of dplyr. We assume familiarity with methods such as: &lt;code&gt;%&amp;gt;%&lt;/code&gt;,
  &lt;code&gt;mutate&lt;/code&gt;, &lt;code&gt;select&lt;/code&gt;, &lt;code&gt;arrange&lt;/code&gt;, &lt;code&gt;rename&lt;/code&gt;. Please check out the official &lt;code&gt;dplyr&lt;/code&gt; &lt;a href=&quot;http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html&quot;&gt;official guide&lt;/a&gt; if you need
  additional resources.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;data-munging&quot;&gt;Data Munging&lt;/h3&gt;

&lt;p&gt;We will abstract most of the cleaning logic in the function &lt;code&gt;clean&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The implementation for &lt;code&gt;clean&lt;/code&gt; is provided below and we&amp;#39;ll expalin the major workflow below:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-R&quot; data-lang=&quot;R&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# clean helper function
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clean&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Clean raw dataframe
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Rename dataframe columns and define types.  Keep some columns
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# @df: raw dataframe from raw_df()
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# @return: cleaned dataframe with some columns kept
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;columns&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ID&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;TDU&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;REP&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;PRODUCT&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                 &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;KWH500&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;KWH1000&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;KWH2000&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                 &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FEES&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;PREPAID&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;TOU&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                 &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FIXED&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;RATE_TYPE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;RENEWABLE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                 &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;TERM_LENGTH&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;CANCEL_FEE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;WEdBSITE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                 &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;TERMS&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;TERMS_URL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;PROMOTION&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;PROMOTION_DESCRIPTION&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                 &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;EFL_URL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ENROLL_URL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;PREPAID_URL&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ENROLL_PHONE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colnames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;columns&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# rename columns
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# mutate df using the amazing dplyr
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TDU&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;REP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PRODUCT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
               &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KWH500&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KWH1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KWH2000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
               &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RATE_TYPE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TERM_LENGTH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RENEWABLE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
               &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PREPAID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TOU&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PROMOTION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EFL_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KWH500&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KWH500&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# convert units from $/kWh to c/kWh
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;               &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KWH1000&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KWH1000&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
               &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KWH2000&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KWH2000&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
               &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PREPAID&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;as.logical&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PREPAID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
               &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TOU&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;as.logical&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TOU&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
               &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PROMOTION&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;as.logical&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PROMOTION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;na.omit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# Remove NA records
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;  Create a vector &lt;code&gt;columns&lt;/code&gt; to be used to rename the native column headers in &lt;code&gt;df&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;  Use &lt;code&gt;dplyr&lt;/code&gt;&amp;#39;s &lt;code&gt;select&lt;/code&gt; to project only the required columns (similar to &lt;code&gt;SQL select&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;  Change and calculate existing columns to new calculated values using &lt;code&gt;mutate&lt;/code&gt;

&lt;ul&gt;
&lt;li&gt;  Convert pricing units from $/kWh to c/kWh&lt;/li&gt;
&lt;li&gt;  Convert &lt;code&gt;PREPAID&lt;/code&gt;, &lt;code&gt;TOU&lt;/code&gt;, &lt;code&gt;PREPAID&lt;/code&gt; columns to &lt;code&gt;logical&lt;/code&gt; datatypes&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;  Remove all rows with &lt;code&gt;NA&lt;/code&gt; values using &lt;code&gt;na.omit(df)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Our dataframe &lt;code&gt;df&lt;/code&gt; is now nicely organized with well-named headers, and we can now load this into our &lt;code&gt;shiny&lt;/code&gt; application
through &lt;code&gt;global.R&lt;/code&gt; (calling it once).  In &lt;code&gt;server.R&lt;/code&gt;, there are a lot more dataframe manipulations used to generate unique
visualizations, but the basis for these manipulations depend on the dataframe that we have organized cleanly in this step.&lt;/p&gt;

&lt;p&gt;For a sneak peek, our cleaned &lt;code&gt;df&lt;/code&gt; now looks like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-PowerToChoose/datatable.png&quot; alt=&quot;image-datatable&quot;&gt;&lt;/p&gt;

&lt;p&gt;And that&amp;#39;s all to the data lifecycle section of the guide!&lt;/p&gt;

&lt;p&gt;&lt;sub&gt;(back to &lt;a href=&quot;#contents&quot;&gt;contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;http://www.powertochoose.org/&quot;&gt;Power to Choose&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;https://www.puc.texas.gov/&quot;&gt;PUC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://www.ercot.com/&quot;&gt;ERCOT&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://shiny.rstudio.com/&quot;&gt;Shiny&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html&quot;&gt;dplyr&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;https://github.com/chrisrzhou/RShiny-EC2Bootstrap&quot;&gt;Shiny EC2 Bootstrap Guide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(back to &lt;a href=&quot;#contents&quot;&gt;contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;!-- external links --&gt;

&lt;!-- images link --&gt;
</description>
        <pubDate>Tue, 10 Feb 2015 23:37:00 +0000</pubDate>
        <link>http://localhost:4000/blog/visualizations/2015/02/10/r-shiny-power-to-choose-writeup</link>
        <guid isPermaLink="true">http://localhost:4000/blog/visualizations/2015/02/10/r-shiny-power-to-choose-writeup</guid>
        
        <category>analysis</category>
        
        <category>electricity</category>
        
        <category>market</category>
        
        <category>r</category>
        
        <category>shiny</category>
        
        
        <category>visualizations</category>
        
      </item>
    
      <item>
        <title>R Shiny Labor Force Statistics Writeup</title>
        <description>&lt;h2 id=&quot;project-link&quot;&gt;&lt;a href=&quot;http://shiny.vis.datanaut.io/LaborForceStatistics/&quot;&gt;Project Link&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;This is a data analysis writeup for the R &lt;a href=&quot;http://shiny.rstudio.com/&quot;&gt;Shiny&lt;/a&gt; application - &lt;strong&gt;Labor Force Statistics&lt;/strong&gt;, built to visualize 
labor statistics trends over a number of variables e.g. races and genders.&lt;/p&gt;

&lt;p&gt;The project is hosted on an AWS EC2 instance and all code and implementation is open-source and made available on 
&lt;a href=&quot;https://github.com/chrisrzhou/RShiny-LaborForceStatistics&quot;&gt;Github&lt;/a&gt;.&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;#summary&quot;&gt;Summary&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#labor-force-trends&quot;&gt;Labor Force Trends&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#employment-by-occupation&quot;&gt;Employment by Occupation&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;#a-quick-overview&quot;&gt;A quick overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#men-dominated-industries&quot;&gt;Men-dominated Industries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#education-and-health-sector&quot;&gt;Education and Health Sector&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#public-administration-sector&quot;&gt;Public Administration Sector&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#business-and-finance-sector&quot;&gt;Business and Finance Sector&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#employment-by-education&quot;&gt;Employment by
Education&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;#by-gender&quot;&gt;By gender&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#by-race&quot;&gt;By race&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#data&quot;&gt;Data&lt;/a&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;#data-source&quot;&gt;Data Source&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#data-scraping&quot;&gt;Data Scraping&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#data-munging&quot;&gt;Data Munging&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#data-recap&quot;&gt;Data Recap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;#resources&quot;&gt;Resources&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;h2 id=&quot;summary&quot;&gt;Summary&lt;/h2&gt;

&lt;p&gt;In this visualization application, we want to draw conclusions and trends about labor statistics in the US, by 
comparing employment and unemployment rates across races, genders, occupations, and education levels.&lt;/p&gt;

&lt;p&gt;The original datasets are derived from the Current Population Survey (&lt;a href=&quot;http://www.bls.gov/cps/&quot;&gt;CPS&lt;/a&gt;) released by the Bureau of Labor 
Statistics.  The native HTML table presentation of the data makes it difficult to &lt;em&gt;visualize and derive trends&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Take a look at this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/cps-02.png&quot; alt=&quot;image-cps-02&quot;&gt;&lt;/p&gt;

&lt;p&gt;as opposed to this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/trend-unemployed-rate.png&quot; alt=&quot;image-trend-unemployed-rate&quot;&gt;&lt;/p&gt;

&lt;p&gt;We will delve into details on some interesting topics revolved around:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  Labor Force Trends (&lt;a href=&quot;http://www.bls.gov/cps/cpsaat02.htm&quot;&gt;cps-02&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;  Employment by Occupation (&lt;a href=&quot;http://www.bls.gov/cps/cpsaat14.htm&quot;&gt;cps-14&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;  Employment by Education (&lt;a href=&quot;http://www.bls.gov/cps/cpsaat07.htm&quot;&gt;cps-07&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The writeup will go into detailed analysis on some of the more interesting findings in the visualization sections.&lt;br&gt;
An in-depth overview on data gathering, cleaning, and transformation of the original datasets will be outlined in 
the &lt;a href=&quot;#data&quot;&gt;Data&lt;/a&gt; section.&lt;/p&gt;

&lt;p&gt;At any time, feel free to experiment and draw your own conclusions with the interactive web application and refer to
the &lt;code&gt;.R&lt;/code&gt; files found on the &lt;a href=&quot;https://github.com/chrisrzhou/RShiny-LaborForceStatistics&quot;&gt;Github&lt;/a&gt; project site if you need details on code implementation.&lt;/p&gt;

&lt;p&gt;&lt;sub&gt;(back to &lt;a href=&quot;#contents&quot;&gt;contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;labor-force-trends&quot;&gt;Labor Force Trends&lt;/h2&gt;

&lt;h3 id=&quot;what-does-the-us-population-look-like&quot;&gt;What does the US population look like?&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/trend-population.png&quot; alt=&quot;image-trend-population&quot;&gt;&lt;/p&gt;

&lt;p&gt;It appears that the US population is still &lt;em&gt;growing&lt;/em&gt;.  In addition, note that the population of women is &lt;em&gt;higher&lt;/em&gt; than
men.&lt;/p&gt;

&lt;h3 id=&quot;so-who-is-not-working-in-the-labor-force&quot;&gt;So who is NOT working in the labor force?&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/trend-non-labor-force.png&quot; alt=&quot;image-trend-non-labor-force&quot;&gt;&lt;/p&gt;

&lt;p&gt;We see that a proportionately larger number of women are still not in the labor force, despite a slightly larger 
women population.&lt;/p&gt;

&lt;p&gt;The next bar chart provides another view on the labor force by gender, by looking at employment &lt;em&gt;rates&lt;/em&gt; instead of 
raw population headcount as displayed in the previous graph. &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/trend-employed-rate.png&quot; alt=&quot;image-trend-employed-rate&quot;&gt;&lt;/p&gt;

&lt;p&gt;We observe that there has been an increase in women being employed in the labor force over time (from 47.7% in 1980 
to 53.2% in 2013).  This is a good sign and hopefully things continue to trend towards gender equality.&lt;/p&gt;

&lt;h3 id=&quot;should-gender-equality-apply-to-all-industries&quot;&gt;Should gender equality apply to all industries?&lt;/h3&gt;

&lt;p&gt;Let&amp;#39;s take a quick look at the &lt;em&gt;agriculture&lt;/em&gt; industry sector, where we intuitively identify manual labor being 
employed more readily in men than women.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/trend-agricultural-labor-force.png&quot; alt=&quot;image-trend-agricultural-labor-force&quot;&gt;&lt;/p&gt;

&lt;p&gt;Whoa! This makes intuitive sense, but there are some other interesting questions that can be gathered from this 
visualization:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;  &lt;em&gt;Why is there a slight jump in women agriculture labor force from 1994-1999?&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;  &lt;em&gt;Why is there a sudden decrease in agriculture labor force recent years after 2000?&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;These are questions that require research outside of the dataset, but I thought a few resources that I read online 
are potentially interesting explanations for some of the questions raised out of curiosity:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt; I have not found a possible answer for this, but I&amp;#39;ll leave it for the audience to dig into why there is a slight 
jump in women agriculture labor force involvement from 1994-1999.&lt;/li&gt;
&lt;li&gt; This maybe due to the fact that farm decline stabilized around 1997, as detailed in this
&lt;a href=&quot;http://www.usda.gov/factbook/chapter3.htm&quot;&gt;USDA article&lt;/a&gt;, as total land for farms remained the same after a decline in overall farms
(i.e. farms stabilized into larger farms, which probably consolidated equipment and labor requirements over time)&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;how-about-the-unemployed&quot;&gt;How about the unemployed?&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/trend-unemployed-rate.png&quot; alt=&quot;image-trend-unemployed-rate&quot;&gt;&lt;/p&gt;

&lt;p&gt;From this bar chart, we see that both men and women suffer through economic recessions.&lt;/p&gt;

&lt;p&gt;For some interesting facts, here are some details on major &lt;a href=&quot;http://en.wikipedia.org/wiki/List_of_recessions_in_the_United_States&quot;&gt;recessions&lt;/a&gt; that occurred in the US.  I&amp;#39;m not an expert 
in labor statistics, but it seems that unemployment rates straggle a few more years after the recession periods 
before recovery.  And we seem to be experiencing some kind of recession every 10 years, although this is more of 
an observation and not a conclusive statement with the small dataset we are working with&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;http://en.wikipedia.org/wiki/Early_1980s_recession&quot;&gt;Early 1980s Recession&lt;/a&gt; (1981 - 1982)&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://en.wikipedia.org/wiki/Early_1990s_recession&quot;&gt;Early 1990s Recession&lt;/a&gt; (1990 - 1991)&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://en.wikipedia.org/wiki/Great_Recession&quot;&gt;The Great Recession&lt;/a&gt; (2007 - 2009)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This wraps up some of the visualizations that I found interesting.  Feel free to play with the webapp to discover 
more findings!  In the next section, we will study in more detail how each race and gender group perform in various 
occupations and industries at certain age groups.&lt;/p&gt;

&lt;p&gt;&lt;sub&gt;(back to &lt;a href=&quot;#contents&quot;&gt;contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;employment-by-occupation&quot;&gt;Employment by Occupation&lt;/h2&gt;

&lt;h3 id=&quot;a-quick-overview&quot;&gt;A quick overview&lt;/h3&gt;

&lt;p&gt;The next facet plot visualization helps us get a quick overview on relative percentages of employed people across 
genders and races in various occupations and industries, sliced by age groups.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/occupation-all.png&quot; alt=&quot;image-occupation-all&quot;&gt;&lt;/p&gt;

&lt;p&gt;Some quick observations and comments:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  We will use percentages to convey the data instead of raw head counts, which will skew the visualization towards
the &lt;strong&gt;White&lt;/strong&gt; demographic.&lt;/li&gt;
&lt;li&gt;  All percentages within a race (column) sums up to 100% in a given age group, this helps us determine the 
relative gender and racial distribution for each age group across occupations and industries.&lt;/li&gt;
&lt;li&gt;  We observe that for age group 1 (16-19 years), most younger people in the labor force are engaged in 
&lt;strong&gt;Wholesale/Retail&lt;/strong&gt; as well as &lt;strong&gt;Leisure Services&lt;/strong&gt; occupations, and for age group 4 (55 years and older), most
older people are engaging in &lt;strong&gt;Education/Health Services&lt;/strong&gt;.  This seems to make intuitive sense: younger people 
engage in industries that require higher energy and attention while older people fit better in less energetic 
industries.&lt;/li&gt;
&lt;li&gt;  Men-dominated industries include &lt;strong&gt;Transportation/Utilities&lt;/strong&gt;, &lt;strong&gt;Mining/Extraction&lt;/strong&gt;, &lt;strong&gt;Manufacturing&lt;/strong&gt;, and 
&lt;strong&gt;Construction&lt;/strong&gt;, while women-dominated industries include &lt;strong&gt;Education/Health Services&lt;/strong&gt;.  The rest of the 
industry seem to have relatively equal gender distributions across all races.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;men-dominated-industries&quot;&gt;Men-Dominated Industries&lt;/h3&gt;

&lt;p&gt;Knowing that men are better suited at labor-intensive roles, we can take a closer look at the primary industry 
sector comprised of &lt;strong&gt;Transportation/Utilities&lt;/strong&gt;, &lt;strong&gt;Mining/Extraction&lt;/strong&gt;, &lt;strong&gt;Manufacturing&lt;/strong&gt;, and &lt;strong&gt;Construction&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/occupation-male-dominated.png&quot; alt=&quot;image-occupation-male-dominated&quot;&gt;&lt;/p&gt;

&lt;p&gt;A few interesting things stand out:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  Most of the primary industry sector labor force is in the age group 2 and 3 (20-24 years and 25-54 years).&lt;/li&gt;
&lt;li&gt;  We see a general trend of lower &lt;strong&gt;Mining/Extraction&lt;/strong&gt; and &lt;strong&gt;Construction&lt;/strong&gt; jobs in favor of 
&lt;strong&gt;Transportation/Utilities&lt;/strong&gt; and &lt;strong&gt;Manufacturing&lt;/strong&gt; jobs for the higher age groups, which makes intuitive sense 
as manual labor-intensive jobs are better suited for the younger population.&lt;/li&gt;
&lt;li&gt;  There is another observation that Hispanic males are disproportionately involved in the &lt;strong&gt;Construction&lt;/strong&gt; 
industry sector (as circled in red above, e.g. 19.9% Hispanics vs 13.6% White for age group 3)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;By highlighting a specific age group (e.g. 20-24 years), and focusing on the blue columns which represent men labor 
force, we can see some variations among the races in the occupations they engage in.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/occupation-male-dominated-age-group-2.png&quot; alt=&quot;image-occupation-male-dominated-age-group-2&quot;&gt;&lt;/p&gt;

&lt;p&gt;For age group 2 (20-24 years):&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  Asians are engaged more in &lt;strong&gt;Manufacturing&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;  Blacks are engaged more in &lt;strong&gt;Transportation/Utilities&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;  Hispanics are engaged more in &lt;strong&gt;Construction&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;  Whites are engaged slightly more evenly in &lt;strong&gt;Manufacturing&lt;/strong&gt; and &lt;strong&gt;Construction&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In the next sections, we will take a close look at some specific industries across the dimensions of race, gender 
and age groups.&lt;/p&gt;

&lt;h3 id=&quot;education-and-health-sector&quot;&gt;Education and Health Sector&lt;/h3&gt;

&lt;p&gt;First up, we have the &lt;strong&gt;Education/Health&lt;/strong&gt; sector, where we can obviously identify it as a women-dominated sector.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/occupation-education-health.png&quot; alt=&quot;image-occupation-education-health&quot;&gt;&lt;/p&gt;

&lt;p&gt;Here is a summary of the distribution across age groups in &lt;strong&gt;Education/Health&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  Asians have roughly equivalent distribution across age groups.&lt;/li&gt;
&lt;li&gt;  All the other races seem to have growing distribution towards working in the &lt;strong&gt;Education/Health&lt;/strong&gt; sector as the 
labor force gets older.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;public-administration-sector&quot;&gt;Public Administration Sector&lt;/h3&gt;

&lt;p&gt;There is a clear increase of older labor force participating in the &lt;strong&gt;Public Administration&lt;/strong&gt; industry sector, with 
roughly equal gender distributions.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/occupation-public-administration.png&quot; alt=&quot;image-occupation-public-administration&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;business-and-finance-sector&quot;&gt;Business and Finance Sector&lt;/h3&gt;

&lt;p&gt;A quick look at the visualization suggests that younger people (age groups 1 and 2) are more engaged in 
&lt;strong&gt;Wholesale/Retail&lt;/strong&gt;, while the older people (age groups 3 and 4) are engaged in &lt;strong&gt;Professional/Business Services&lt;/strong&gt; 
and &lt;strong&gt;Finance Services&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Gender distributions across these service sector look roughly equivalent.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/occupation-sales-business-finance.png&quot; alt=&quot;image-occupation-sales-business-finance&quot;&gt;&lt;/p&gt;

&lt;p&gt;This wraps up some detailed facet plot visualizations of multi-dimensional analysis of labor force statistics across
industry, occupations, gender, races and age groups.&lt;/p&gt;

&lt;p&gt;&lt;sub&gt;(back to &lt;a href=&quot;#contents&quot;&gt;contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;employment-by-education&quot;&gt;Employment by Education&lt;/h2&gt;

&lt;p&gt;We all hear the saying that getting a Bachelor&amp;#39;s degree is &lt;em&gt;necessary&lt;/em&gt; to finding jobs.  We will take a deeper look 
into the dataset provided by CPS.&lt;/p&gt;

&lt;h3 id=&quot;by-gender&quot;&gt;By gender&lt;/h3&gt;

&lt;p&gt;Here are some quick numbers of the labor force by education level attainment.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/education-labor-force-by-gender.png&quot; alt=&quot;image-education-labor-force-by-gender&quot;&gt;&lt;/p&gt;

&lt;p&gt;Most people in the US seem to have attained Bachelor degrees, or attended college with some associate or no degree.&lt;/p&gt;

&lt;p&gt;When we zone in on the unemployment rates, we find an inverse correlation with educational level and unemployment 
rate.  People holding bachelor degrees or attended college earning an associate degree have much lower unemployment 
rates than individuals who have not attended college or earned any degree.&lt;/p&gt;

&lt;p&gt;Judging by the numbers, it is recommended that you should try to earn at least an associate degree in college, since
the unemployment rates of graduating high school and attending college earning no degree are roughly the same.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/education-unemployment-by-gender.png&quot; alt=&quot;image-education-unemployment-by-gender&quot;&gt;&lt;/p&gt;

&lt;p&gt;The next section filters the results by race instead of gender.&lt;/p&gt;

&lt;h3 id=&quot;by-race&quot;&gt;By race&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/education-labor-force-by-race.png&quot; alt=&quot;image-education-labor-force-by-race&quot;&gt;&lt;/p&gt;

&lt;p&gt;The unemployment rate trend is essentially the same as we observed in the gender overview i.e. a higher education 
degree confers better chances of getting a job.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/education-unemployment-by-race.png&quot; alt=&quot;image-education-unemployment-by-race&quot;&gt;&lt;/p&gt;

&lt;p&gt;However something stands out.&lt;/p&gt;

&lt;p&gt;We see that the Black and Hispanic populations have higher unemployment rates than the other races at each education
level attainment.  This may or may not be due to racial discrimination, but if we made the assumption that education
has delivered equal opportunities to individuals developing skills for work, then this is an area of improvement we 
can work on if racial discrimination exists.&lt;/p&gt;

&lt;p&gt;&lt;sub&gt;(back to &lt;a href=&quot;#contents&quot;&gt;contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;Despite the focus on expressing gender and racial equality statistics on labor force, I strongly believe that
  the topic of labor statistics should revolve around &lt;strong&gt;ability equality&lt;/strong&gt; and not around gender and racial equality.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;As seen in the example of agricultural jobs, women lack the natural ability to perform in this industry, and this 
should not be interpreted as discrimination when we evaluate people&amp;#39;s ability to do certain work.&lt;/p&gt;

&lt;p&gt;We need to be careful about over-emphasizing the obsession in optimizing &amp;quot;gender/racial-equal&amp;quot; numbers, which in my 
opinion, is another form of discrimination by overly stressing the concepts of genders and races, when our ultimate 
goal is to hopefully not create concepts of races and genders when we are engaging in professional evaluations of 
people.&lt;/p&gt;

&lt;p&gt;Our solutions in education and government policies should be geared towards empowering individuals with &lt;em&gt;equal 
opportunities&lt;/em&gt; to pursue what they want to achieve in their careers, and it is very important that pre-employment 
education is provided for every individual fairly, so that the true test of employment can be judged on a merit 
basis, instead on trying to optimize &amp;quot;gender/racial-equal&amp;quot; metrics.&lt;/p&gt;

&lt;p&gt;In the future, it is my hope that all &lt;code&gt;gender&lt;/code&gt; and &lt;code&gt;race&lt;/code&gt; data in these visualizations contained can be collapsed, 
providing us with a simple analysis on our labor force statistics (as shown in the bar chart below without grouping 
by gender and race), one that is evaluated from all human individuals, as opposed to one evaluated based on races 
and genders.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/trend-all.png&quot; alt=&quot;image-trend-all&quot;&gt;&lt;/p&gt;

&lt;p&gt;&lt;sub&gt;(back to &lt;a href=&quot;#contents&quot;&gt;contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;data&quot;&gt;Data&lt;/h2&gt;

&lt;blockquote&gt;
&lt;p&gt;This section provides details on the data source and processes that go towards scraping and munging the initial 
  unorganized data into a consolidated R dataframe that is used in the Shiny app.  We will make references to the 
  files on the &lt;a href=&quot;https://github.com/chrisrzhou/RShiny-LaborForceStatistics&quot;&gt;Github&lt;/a&gt; project.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;All data is owned by the Current Population Survey (&lt;a href=&quot;http://www.bls.gov/cps/&quot;&gt;CPS&lt;/a&gt;) made available by the Bureau of Labor Statistics.  I am 
not affiliated with CPS, and this writeup and application is purely for practicing and sharing thoughts behind data 
management and visualization.&lt;/p&gt;

&lt;p&gt;If you are not interested in the data background and processes, feel free to jump back to the visualization sections!&lt;/p&gt;

&lt;h3 id=&quot;data-source&quot;&gt;Data Source&lt;/h3&gt;

&lt;p&gt;We will be using the following CPS datasets:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.bls.gov/cps/cpsaat02.htm&quot;&gt;cps-02&lt;/a&gt;: Time series of employment statistics by gender.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/cps-02.png&quot; alt=&quot;image-cps-02&quot;&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.bls.gov/cps/cpsaat14.htm&quot;&gt;cps-14&lt;/a&gt;: Most recent employment statistics by industry, age, gender, and race.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/cps-14.png&quot; alt=&quot;image-cps-14&quot;&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.bls.gov/cps/cpsaat07.htm&quot;&gt;cps-07&lt;/a&gt;: Most recent employment statistics by education level, gender, and race.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/cps-07.png&quot; alt=&quot;image-cps-07&quot;&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Careful observation of the native data presentation suggests that the data tables involve some nesting.  For a 
general workflow with R and Shiny visualizations, we would need to collapse the data into a &lt;em&gt;flat&lt;/em&gt; dataframe structure.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Luckily&lt;/em&gt;, it looks like the HTML tables themselves &lt;em&gt;follow some kind of pattern&lt;/em&gt;.  The fact that some consistent 
structure exists means that we can put our data munging skills to good use and transform the data into a better 
structure for reusable code in future programs.&lt;/p&gt;

&lt;p&gt;But first, let&amp;#39;s scrape the data before cleaning it up!&lt;/p&gt;

&lt;h3 id=&quot;data-scraping&quot;&gt;Data Scraping&lt;/h3&gt;

&lt;p&gt;For the following section, we will walk through only one example of a data scraping/munging step abstracted in the 
function &lt;code&gt;get_labor_trend&lt;/code&gt; in the &lt;code&gt;/data/parser.R&lt;/code&gt; file.  We will refer the readers to dig into the other functions 
in detail at their own pace (most of them are similar in construction and abstraction).&lt;/p&gt;

&lt;p&gt;Open the &lt;code&gt;/data/parser.R&lt;/code&gt; file and locate the &lt;code&gt;get_labor_trend&lt;/code&gt; function.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;In general, it is a good idea to build your data processing steps into multiple readable functions, so that they
  can be called in future applications and programs.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;We will use the package &lt;code&gt;XML&lt;/code&gt; for reading a HTML table into an R dataframe with the help of the function 
&lt;code&gt;readHTMLTable&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;We first define the &lt;code&gt;url&lt;/code&gt; and &lt;code&gt;colnames&lt;/code&gt; variables, where the &lt;code&gt;url&lt;/code&gt; points to the CPS dataset URL, and &lt;code&gt;colnames&lt;/code&gt; is 
a convenient &lt;em&gt;named&lt;/em&gt; vector to pass both the column names and column types to the dataframe we are creating with 
&lt;code&gt;readHTMLTable&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-R&quot; data-lang=&quot;R&quot;&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://www.bls.gov/cps/cpsaat02.htm&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colnames&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;integer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Total Population&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FormattedInteger&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Labor Force (Total)&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FormattedInteger&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;% Labor Force (Total)&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;numeric&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Labor Force (Employed)&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FormattedInteger&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;% Labor Force (Employed)&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;numeric&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Labor Force (Agriculture)&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FormattedInteger&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Labor Force (Non-agriculture)&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FormattedInteger&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Labor Force (Unemployed)&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FormattedInteger&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;% Labor Force (Unemployed)&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;numeric&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Non-Labor Force (Total)&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FormattedInteger&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tables&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readHTMLTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringsAsFactors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;FALSE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colnames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;The use of a &lt;em&gt;named&lt;/em&gt; vector for &lt;code&gt;colnames&lt;/code&gt; allows us to easily extract two sets of information in one variable
  i.e. &lt;code&gt;names(colnames)&lt;/code&gt; extracts the names while &lt;code&gt;unname(colnames)&lt;/code&gt; extracts the format types of the named vector
  &lt;code&gt;colnames&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;We pass in &lt;code&gt;stringsAsFactors=FALSE&lt;/code&gt; to prevent conversion of string variables into factors, which will be quite a 
pain to deal with for future processes, so let&amp;#39;s just keep to primitive data types used in common programming 
languages.&lt;/p&gt;

&lt;p&gt;By using the R-console and a couple of &lt;code&gt;print&lt;/code&gt; statements, we learn that the variable &lt;code&gt;tables&lt;/code&gt; is a list of HTML 
tables that are found on the URL.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If you are interested, you can view the source page of the URL and check that there are indeed the same number 
  of tables as the dimensions of our &lt;code&gt;tables&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Assuming that CPS keeps the format of their dataset/webpage in the same format, we can locate the data we want as 
the second table in the URL.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s assign this to the variable &lt;code&gt;df&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-R&quot; data-lang=&quot;R&quot;&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tables&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Try printing the value of&lt;code&gt;df&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;It looks a little unstructured, despite living in a dataframe.  Our goal now is to reshape the dataframe into a flat
and long format, and this is best accomplished using the great &lt;code&gt;dplyr&lt;/code&gt; library produced by Hadley Wickham, which 
beautifully abstracts common reshaping workflows in R into a concise and readable syntax and implementation&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The rest of the data section assumes elementary knowledge of &lt;code&gt;dplyr&lt;/code&gt;.  We assume familiarity with methods such 
  as: &lt;code&gt;%&amp;gt;%&lt;/code&gt;, &lt;code&gt;mutate&lt;/code&gt;, &lt;code&gt;select&lt;/code&gt;, &lt;code&gt;arrange&lt;/code&gt;, &lt;code&gt;rename&lt;/code&gt;.  Please check out the official &lt;code&gt;dplyr&lt;/code&gt; &lt;a href=&quot;http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html&quot;&gt;official guide&lt;/a&gt; 
  if you need additional resources.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;data-munging&quot;&gt;Data Munging&lt;/h3&gt;

&lt;p&gt;With &lt;code&gt;dplyr&lt;/code&gt; and &lt;code&gt;reshape2&lt;/code&gt;, it&amp;#39;s time to hack and slash!&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s do some very basic cleaning steps to rename the columns and remove &lt;code&gt;NA&lt;/code&gt; records (caused by nesting in the 
original HTML table that produces whitespaces during the data import through &lt;code&gt;readHTMLTable&lt;/code&gt;).&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-R&quot; data-lang=&quot;R&quot;&gt;&lt;span class=&quot;n&quot;&gt;colnames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;names&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colnames&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# rename columns
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;na.omit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# remove NAs
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The next step is to spend some time carefully observe the &lt;a href=&quot;http://www.bls.gov/cps/cpsaat02.htm&quot;&gt;cps-02&lt;/a&gt; dataset and its structure and patterns:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/cps-02.png&quot; alt=&quot;image-cps-02&quot;&gt;&lt;/p&gt;

&lt;p&gt;And see if we can wrangle it to, perhaps, this preferred nice, flat and long structure:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/long-wide-df.png&quot; alt=&quot;image-long-wide-df&quot;&gt;&lt;/p&gt;

&lt;p&gt;Notice that the original data structure has column headers which can be pivoted into values under a new variable 
&lt;code&gt;population&lt;/code&gt;.  This will allow us to pivot and reshape the wide dataframe into a long dataframe if we pivot on the 
variables &lt;code&gt;year&lt;/code&gt; and &lt;code&gt;gender&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;However, there is one pesky problem.&lt;/p&gt;

&lt;p&gt;The gender in the original data structure is located in a &lt;code&gt;subtotal&lt;/code&gt; row.  We need to find a way to populate the 
&lt;code&gt;&amp;quot;Men&amp;quot;&lt;/code&gt; and &lt;code&gt;&amp;quot;Women&amp;quot;&lt;/code&gt; gender values in all the data records, while potentially acknowledging that the dataset 
records can vary (inclusion or exclusion of years for each gender).&lt;/p&gt;

&lt;p&gt;Our human skills of observation and pattern recognition intuitively suggests to us that this dataset contains twice 
the amount of record for each gender.  By observation, we also note note that the initial data is sorted by &lt;code&gt;&amp;quot;Men&amp;quot;&lt;/code&gt;,
then by &lt;code&gt;&amp;quot;Women&amp;quot;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This suggests that we can generate a dynamic &lt;code&gt;genders&lt;/code&gt; vector with number of records dependent on the size of the 
dataframe itself i.e. &lt;code&gt;genders=c(&amp;quot;Men&amp;quot;, &amp;quot;Men&amp;quot;, ..., &amp;quot;Women&amp;quot;, &amp;quot;Women&amp;quot;)&lt;/code&gt;.  R does this nicely for us through the use:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-R&quot; data-lang=&quot;R&quot;&gt;&lt;span class=&quot;n&quot;&gt;genders&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Men&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Women&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nrow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# create genders column to correct length
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Print the variable &lt;code&gt;genders&lt;/code&gt; to see for yourself, we indeed have a vector &lt;code&gt;genders=c(&amp;quot;Men&amp;quot;, &amp;quot;Men&amp;quot;, ..., &amp;quot;Women&amp;quot;, 
&amp;quot;Women&amp;quot;)&lt;/code&gt; that we can integrate into our dataframe &lt;code&gt;df&lt;/code&gt; using &lt;code&gt;dplyr&lt;/code&gt;&amp;#39;s &lt;code&gt;mutate&lt;/code&gt; method.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-R&quot; data-lang=&quot;R&quot;&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gender&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;genders&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# add gender column
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The last step for the data munging process is to pivot the dataframe from wide to long format on the variables 
&lt;code&gt;gender&lt;/code&gt; and &lt;code&gt;year&lt;/code&gt;.  This collapses all the column headers into data values under a new column variable, which we 
will call &lt;code&gt;population&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Reassign the &amp;quot;melted&amp;quot; dataframe to itself again, and convert the &lt;code&gt;population&lt;/code&gt; column into a &lt;code&gt;character&lt;/code&gt; column 
(BOOOO to factors unless we absolutely need it!), and finally do some cosmetic sorting with the &lt;code&gt;arrange&lt;/code&gt; method.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-R&quot; data-lang=&quot;R&quot;&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;melt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;year&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;gender&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# melt from wide to long
&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;population&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;variable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;population&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;as.character&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;population&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arrange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gender&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;population&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Try printing &lt;code&gt;df&lt;/code&gt; again:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-LaborForceStatistics/long-wide-df.png&quot; alt=&quot;image-long-wide-df&quot;&gt;&lt;/p&gt;

&lt;p&gt;Woohoo! This looks clean and long, just what we need for data post-processing and visualizations!&lt;/p&gt;

&lt;p&gt;Please feel free to go over the other functions and data manipulation steps.  The general idea is common across all 
of them, and they are summarized below.&lt;/p&gt;

&lt;h3 id=&quot;data-recap&quot;&gt;Data Recap&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;  Abstract data gathering and processes into functions.&lt;/li&gt;
&lt;li&gt;  Define variables, and utilize the strengths of named vectors through the R functions &lt;code&gt;names&lt;/code&gt; and &lt;code&gt;unname&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;  Load the HTML tables into dataframes initially with     &lt;code&gt;readHTMLTable&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;  Build vectors using &lt;code&gt;rep(vector, each)&lt;/code&gt; by careful observation of the original data structure and desired final 
data structure.&lt;/li&gt;
&lt;li&gt;  Include all missing columns into the dataframe before the final pivot step to collapse the dataframe from wide 
to long, with the help of &lt;code&gt;reshape2&lt;/code&gt;&amp;#39;s &lt;code&gt;melt&lt;/code&gt; function.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(back to &lt;a href=&quot;#contents&quot;&gt;contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;  CPS data: &lt;a href=&quot;http://www.bls.gov/cps/cpsaat02.htm&quot;&gt;cps-02&lt;/a&gt;, &lt;a href=&quot;http://www.bls.gov/cps/cpsaat14.htm&quot;&gt;cps-14&lt;/a&gt;, &lt;a href=&quot;http://www.bls.gov/cps/cpsaat07.htm&quot;&gt;cps-07&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://shiny.rstudio.com/&quot;&gt;Shiny&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html&quot;&gt;dplyr&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;https://github.com/chrisrzhou/RShiny-EC2Bootstrap&quot;&gt;Shiny EC2 Bootstrap Guide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(back to &lt;a href=&quot;#contents&quot;&gt;contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;!-- external links --&gt;

&lt;!-- images link --&gt;
</description>
        <pubDate>Wed, 04 Feb 2015 23:37:00 +0000</pubDate>
        <link>http://localhost:4000/blog/visualizations/2015/02/04/r-shiny-labor-force-statistics-writeup</link>
        <guid isPermaLink="true">http://localhost:4000/blog/visualizations/2015/02/04/r-shiny-labor-force-statistics-writeup</guid>
        
        <category>analysis</category>
        
        <category>labor-force</category>
        
        <category>unemployment</category>
        
        <category>r</category>
        
        <category>shiny</category>
        
        
        <category>visualizations</category>
        
      </item>
    
      <item>
        <title>Initial Site Design</title>
        <description>&lt;p&gt;Just put some finishing touches on the design of the site.  I was inspired by the color themes on &lt;a href=&quot;http://git-scm.com/&quot;&gt;http://git-scm.com/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;/&quot;&gt;Home&lt;/a&gt;, &lt;a href=&quot;/about/&quot;&gt;About&lt;/a&gt; and &lt;a href=&quot;/resume/&quot;&gt;Resume&lt;/a&gt; sections are now up.&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;projects-section&quot;&gt;Projects section&lt;/h2&gt;

&lt;p&gt;I intend to try to hook up my projects this week (probably will utilize iframes calling from Gists and Github, or 
explore some Jekyll options to integrate open-source projects into the home page.&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;blog-section&quot;&gt;Blog section&lt;/h2&gt;

&lt;p&gt;I have some ideas on designing the &lt;a href=&quot;/blog/&quot;&gt;Blog&lt;/a&gt; section:
-   Lay out categories and tags in an &lt;code&gt;&amp;lt;aside&amp;gt;&lt;/code&gt; where we can filter blog posts by categories or tags.
-   Figure out what the categories are going to be.  Some rough categories would be: &lt;code&gt;data&lt;/code&gt;, &lt;code&gt;visualization&lt;/code&gt;, &lt;code&gt;site&lt;/code&gt;,
   &lt;code&gt;Python&lt;/code&gt;, &lt;code&gt;R&lt;/code&gt;, to help users find interesting posts.
-   Explore hooking up a third-party chat/comment system, probably &lt;a href=&quot;https://disqus.com/&quot;&gt;Disqus&lt;/a&gt;?&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;a-note-on-markdown&quot;&gt;A note on markdown&lt;/h2&gt;

&lt;p&gt;And I&amp;#39;m starting to fall in love with markdown.  I think there&amp;#39;s already been a rising adoption of using markdowns in
many forums and chatting functionality.  Here&amp;#39;s hoping that this awesome &lt;strong&gt;writing&lt;/strong&gt; language for the web continues a
positive adoption trend!&lt;/p&gt;

&lt;!-- links --&gt;
</description>
        <pubDate>Wed, 04 Feb 2015 01:32:00 +0000</pubDate>
        <link>http://localhost:4000/blog/site/2015/02/04/initial-site-design</link>
        <guid isPermaLink="true">http://localhost:4000/blog/site/2015/02/04/initial-site-design</guid>
        
        <category>css</category>
        
        <category>scss</category>
        
        <category>markdown</category>
        
        
        <category>site</category>
        
      </item>
    
      <item>
        <title>Markdown</title>
        <description>&lt;p&gt;Today, I decided to spend some time researching more about the &lt;code&gt;markdown&lt;/code&gt; format.  I have been using it for quite 
some time but realized its growing popularity in documenting &lt;code&gt;READMEs&lt;/code&gt;, as well as being a very easy way to
writeup HTML-like documents.&lt;/p&gt;

&lt;p&gt;As the creator John Gruber mentioned on &lt;a href=&quot;http://daringfireball.net/projects/markdown/syntax#philosophy&quot;&gt;Daring Fireball&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Markdown is intended to be as easy-to-read and easy-to-write as is feasible.
  Readability, however, is emphasized above all else.
  A Markdown-formatted document should be publishable as-is, as plain text,
  without looking like it’s been marked up with tags or formatting instructions.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr&gt;

&lt;h2 id=&quot;so-what-did-i-learn-not-to-do&quot;&gt;So what did I learn NOT to do?&lt;/h2&gt;

&lt;p&gt;I spent a good few hours reading and making sure that I understand the conventions that Gruber was laying out in his 
guide.  A few things that I noted in particular that I was &lt;em&gt;not&lt;/em&gt; doing:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;The key convention/style is to make sure that you are writing a document that is readable by itself!  This means
to avoid the use of too much HTML tags whenever necessary and keep the document reading like a written &amp;quot;English&amp;quot; 
article.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;It&amp;#39;s good to use &lt;em&gt;hanging indents&lt;/em&gt; when making lists, instead of the lazy way i.e. try to indent immediately 
after the list icon, and align subsequent lines with indents when necessary.  It is both aesthetically pleasing 
and avoids potential errors due to mis-indentation or missing line breaks.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;# Do this
*   Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
    Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi,
    viverra nec, fringilla in, laoreet vitae, risus.
*   Donec sit amet nisl. Aliquam semper ipsum sit amet velit.
    Suspendisse id sem consectetuer libero luctus adipiscing.

# and not this
*   Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi,
viverra nec, fringilla in, laoreet vitae, risus.
*   Donec sit amet nisl. Aliquam semper ipsum sit amet velit.
Suspendisse id sem consectetuer libero luctus adipiscing.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The use of link references e.g. &lt;code&gt;[link][link:id]&lt;/code&gt; and specifying anywhere in the document &lt;code&gt;[link:id]: 
link_address&lt;/code&gt; is a great way to organize the markdown document.  It creates a more readable flow and delegates 
links as &amp;quot;footnotes&amp;quot; which can also be reused throughout the website.  This approach also works with images. 
There are also some shortcuts that we can employ:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;code&gt;[link][]&lt;/code&gt; is a shorthand for setting &lt;code&gt;link:id&lt;/code&gt; to the name &lt;code&gt;link&lt;/code&gt; itself&lt;/li&gt;
&lt;li&gt;  &lt;code&gt;&amp;lt;www.example.com&amp;gt;&lt;/code&gt; is a shorthand for setting &lt;code&gt;www.example.com&lt;/code&gt; as both the text to be displayed and the link 
object.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;h2 id=&quot;github-vs-jekyll-markdown-flavors-to-use&quot;&gt;Github vs Jekyll Markdown flavors to use?&lt;/h2&gt;

&lt;p&gt;This &lt;a href=&quot;http://stackoverflow.com/questions/13464590/github-flavored-markdown-and-pygments-highlighting-in-jekyll/13614020#13614020&quot;&gt;stackoverflow post&lt;/a&gt; helped me answer a lot of the question I had about the defaults that Jekyll and Github 
Flavored Markup (GFM) are using.&lt;/p&gt;

&lt;p&gt;A brief summary:
-   Jekyll retired &lt;code&gt;Maruku&lt;/code&gt; in favor of &lt;code&gt;kramdown&lt;/code&gt; as the default parser.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;GFM is parsed using &lt;code&gt;redcarpet2&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;If you are using &lt;code&gt;kramdown&lt;/code&gt;, backtick codefences that are commonly used in Github markdown documents will not 
work.  You have to use codefences utilizing tildes &lt;code&gt;~~~&lt;/code&gt; instead.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Jekyll has support for &lt;code&gt;redcarpet&lt;/code&gt; but not &lt;code&gt;redcarpet2&lt;/code&gt;, which needs to be installed through a ruby &lt;code&gt;gem&lt;/code&gt;, but
using &lt;code&gt;redcarpet&lt;/code&gt; is sufficient for most features that you see in GFM e.g. backtick codefencing.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;If you are using &lt;code&gt;kramdown&lt;/code&gt;, you would need to use liquid-tags for &lt;code&gt;Pygment&lt;/code&gt; syntax-highlighting.  If you are using
&lt;code&gt;redcarpet&lt;/code&gt;, you get the syntax-highlighting for free without using liquid tags (&lt;em&gt;this is somewhat weird to me 
considering that &lt;code&gt;kramdown&lt;/code&gt; is Jekyll&amp;#39;s default parser but is lacking this nice convenient option to ignore 
liquid tags for syntax-highlighting&lt;/em&gt;).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Based on these learnings, and identifying my preferred use of markdown and reusable workflow with Github markdown 
documents, my recommendation choice was to use &lt;code&gt;redcarpet&lt;/code&gt; as the markdown parser for Jekyll.  This allows me to keep
the backtick codefences and still get the full syntax-highlighting without the need to adjust the codefences or to 
use liquid-tags for highlighting.&lt;/p&gt;

&lt;p&gt;Hopefully Jekyll team is able to add an option for &lt;code&gt;GFM&lt;/code&gt; in its entirety, this will allow many Github documents to be
reused without adjustments to the markdown documents.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;Anyway, in summary, these are the things that I have learned today, and I am applying these conventions/practices 
immediately to get more familiar, and to practice and practice until this sinks in as a natural muscle memory
in quickly typing and organizing markdown documents! :)&lt;/p&gt;

&lt;!-- links --&gt;
</description>
        <pubDate>Sat, 31 Jan 2015 00:12:00 +0000</pubDate>
        <link>http://localhost:4000/blog/site/2015/01/31/markdown</link>
        <guid isPermaLink="true">http://localhost:4000/blog/site/2015/01/31/markdown</guid>
        
        <category>markdown</category>
        
        <category>redcarpet</category>
        
        <category>gfm</category>
        
        
        <category>site</category>
        
      </item>
    
      <item>
        <title>Organizing DNS and Datanaut</title>
        <description>&lt;p&gt;Today, I spent a good 6+ hours working on learning how to register a domain and subdomains to other IP addresses.  I 
ended up deciding to organize my future sites with the &lt;code&gt;datanaut.io&lt;/code&gt; domain.&lt;/p&gt;

&lt;p&gt;I bought this domain on &lt;a href=&quot;http://aws.amazon.com/route53/&quot;&gt;AWS Route 53&lt;/a&gt; and researched about DNS and IPs, as well as rerouting your domains and 
sub-domains to other IPs and CNAMEs.&lt;/p&gt;

&lt;p&gt;This will allow me to organize future subdomains in possibly this fashion:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;# main domain&lt;/span&gt;
datanaut.io

&lt;span class=&quot;c&quot;&gt;# R shiny, D3 Visualization sub-domain&lt;/span&gt;
shiny.vis.datanaut.io
d3.vis.datanaut.io

&lt;span class=&quot;c&quot;&gt;# Jekyll blog sub-domain&lt;/span&gt;
chrisrzhou.datanaut.io
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I also managed to get the Github pages registered to the &lt;code&gt;chrisrzhou.datanaut.io&lt;/code&gt; subdomain by adding a &lt;code&gt;CNAME&lt;/code&gt; file 
containing the desired domain name, and making sure that AWS Route 53 contains the registered &lt;code&gt;CNAME&lt;/code&gt; entry pointing
to &lt;code&gt;chrisrzhou.github.io&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;I successfully learned and created AWS EC2 &lt;code&gt;Elastic IPs&lt;/code&gt;, which allows for a  more permanent allocation of IP to the 
EC2 instance.  I wasn&amp;#39;t aware that Public IPs in EC2s could be potentially reset if the server restarts, so this was 
helpful in organizing the site.&lt;/p&gt;

&lt;p&gt;You can view the &amp;quot;re-routed&amp;quot; R Shiny Visualizations on EC2 &lt;a href=&quot;http://shiny.vis.datanaut.io/&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I might do a writeup on a guide for AWS Route 53 and AWS VPC sometime in the future :)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;BUT ALAS!&lt;/strong&gt; There is still a &lt;strong&gt;LOT&lt;/strong&gt; of stuff left to do on this site.  I had to delegate some time to learning and
 organizing my other Github projects, and there&amp;#39;s still work to be done with GRADE.&lt;/p&gt;

&lt;!-- links --&gt;
</description>
        <pubDate>Thu, 29 Jan 2015 00:07:00 +0000</pubDate>
        <link>http://localhost:4000/blog/site/2015/01/29/organizing-dns-and-datanaut</link>
        <guid isPermaLink="true">http://localhost:4000/blog/site/2015/01/29/organizing-dns-and-datanaut</guid>
        
        <category>aws</category>
        
        <category>route-53</category>
        
        
        <category>site</category>
        
      </item>
    
      <item>
        <title>Bootstraping the Site</title>
        <description>&lt;p&gt;I&amp;#39;ve been spending the last 2-3 days building this site, and adding in Twitter Bootstrap elements where needed.&lt;/p&gt;

&lt;p&gt;The use of &lt;a href=&quot;http://jekyllrb.com/docs/collections/&quot;&gt;Jekyll collections&lt;/a&gt; to organize the site modules has been very helpful.  A few things that I&amp;#39;m thinking
 of doing is to understand how blog tags/hashtags work.&lt;/p&gt;

&lt;p&gt;As soon as I&amp;#39;m done building the basic layout of the site and site modules, I&amp;#39;ll be adding contents.  Roughly the 
site will be organized with the following modules:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  Homepage / News updates&lt;/li&gt;
&lt;li&gt;  About&lt;/li&gt;
&lt;li&gt;  Contact&lt;/li&gt;
&lt;li&gt;  Visualization panels/thumbnails&lt;/li&gt;
&lt;li&gt;  Blogs&lt;/li&gt;
&lt;li&gt;  External Links/Resources&lt;/li&gt;
&lt;li&gt;  Resume&lt;/li&gt;
&lt;/ul&gt;

&lt;!-- links --&gt;
</description>
        <pubDate>Sun, 25 Jan 2015 11:35:31 +0000</pubDate>
        <link>http://localhost:4000/blog/site/2015/01/25/bootstrap-the-site</link>
        <guid isPermaLink="true">http://localhost:4000/blog/site/2015/01/25/bootstrap-the-site</guid>
        
        <category>bootstrap</category>
        
        <category>collections</category>
        
        <category>jekyll</category>
        
        
        <category>site</category>
        
      </item>
    
      <item>
        <title>R Shiny EC2 Bootstrap Guide</title>
        <description>&lt;p&gt;I wrote a guide on &lt;a href=&quot;https://github.com/chrisrzhou/RShiny-EC2Bootstrap&quot;&gt;Github&lt;/a&gt; to quickly bootstrap an AWS EC2 instance with R Shiny.&lt;/p&gt;

&lt;p&gt;Posting this on Jekyll (second post) seems to be as simple as copying the &lt;code&gt;README.md&lt;/code&gt; file from Github over. Pretty 
damn awesome! Here&amp;#39;s the guide!&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;The goal of this guide is to quickly bootstrap R &lt;a href=&quot;http://shiny.rstudio.com/&quot;&gt;Shiny&lt;/a&gt; on an Amazon AWS &lt;a href=&quot;http://aws.amazon.com/ec2/&quot;&gt;EC2&lt;/a&gt; instance.  We will also walk 
through a recommended workflow using Github for rapid development on a local machine and the EC2 server instance.&lt;/p&gt;

&lt;p&gt;This is an &lt;em&gt;opiniated&lt;/em&gt; guide created for the following software versions:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;Ubuntu: 14.04 LTS
R: 3.1.2
shiny-server: 1.3.0.403
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;em&gt;For other software versions, please make sure to check the version numbers used in the installations (e.g. see 
&lt;a href=&quot;#install-shiny-server&quot;&gt;Install Shiny Server&lt;/a&gt; section on installing different versions of shiny-server).&lt;/em&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;contents&quot;&gt;Contents&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#launch-ec2&quot;&gt;Launch EC2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#register-key-pair&quot;&gt;Register Key Pair&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#install-r&quot;&gt;Install R&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#install-r-packages&quot;&gt;Install R Packages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#install-shiny-server&quot;&gt;Install Shiny Server&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#install-git&quot;&gt;Install Git&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#workflow-overview&quot;&gt;Workflow Overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#problematic-packages&quot;&gt;Problematic Packages&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#examples&quot;&gt;Examples&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#resources&quot;&gt;Resources&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;h2 id=&quot;launch-ec2&quot;&gt;Launch EC2&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Create an &lt;a href=&quot;https://aws.amazon.com/&quot;&gt;AWS&lt;/a&gt; account and login to the &lt;a href=&quot;https://console.aws.amazon.com&quot;&gt;console&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Click on &lt;code&gt;Compute &amp;gt; EC2&lt;/code&gt; (near the top left of the screen) and click the &lt;code&gt;Launch Instance&lt;/code&gt; button in the &lt;code&gt;Create 
Instance&lt;/code&gt; section of the page.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;We are now in the AMI (Amazon Machine Image) interface.  Select &lt;code&gt;Ubuntu Server 14.04 LTS&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-EC2Bootstrap/aws_ec2_ubuntu14.04.png&quot; alt=&quot;image: ubuntu14.04&quot;&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;We will choose the default &lt;code&gt;t2.micro&lt;/code&gt; instance.  Accept all the default settings for the next few steps:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  Click &lt;code&gt;Next: Configure Instance Details&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;  Click &lt;code&gt;Next: Add Storage&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;  Click &lt;code&gt;Next: Tag Instance&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;  Click &lt;code&gt;Next Configure Security Group&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;When we arrive to &lt;code&gt;Configure Security Group&lt;/code&gt;, we will need to add a few more security groups to open our EC2 
instance to the world when we later build applications with Shiny.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Add the following rules using the &lt;code&gt;Add Rule&lt;/code&gt; buttons.  This registers and opens the ports &lt;code&gt;3838&lt;/code&gt; and &lt;code&gt;80&lt;/code&gt; 
that Shiny will use later.  By default, Shiny will listen on the &lt;code&gt;3838&lt;/code&gt; port, but keeping the default HTTP 
listening port &lt;code&gt;80&lt;/code&gt; open is always a useful option (In the &lt;a href=&quot;#install-shiny-server&quot;&gt;Install Shiny Server&lt;/a&gt; section,
 we go through changing the &lt;code&gt;shiny-server&lt;/code&gt; configurations to listen on the default &lt;code&gt;80&lt;/code&gt; port, which removes the 
 need to specify a port number in your URL).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-EC2Bootstrap/aws_ec2_configure_security_groups_complete.png&quot; alt=&quot;image: configure security groups&quot;&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;We are ready to launch our EC2 instance now.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Click on the &lt;code&gt;Review and Launch&lt;/code&gt; button, and &lt;code&gt;Launch&lt;/code&gt; your instance!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-EC2Bootstrap/aws_ec2_launch.png&quot; alt=&quot;image: ec2 launch&quot;&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;register-key-pair&quot;&gt;Register Key Pair&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;With our EC2 instance set up, we need to register the key provided to us from Amazon with our local machine. 
(&lt;em&gt;Note that only one EC2 key can be registered to one machine.&lt;/em&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Amazon will prompty you to create a new key pair.  For this guide, we shall name the keypair &lt;code&gt;shinybootstrap&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-EC2Bootstrap/aws_ec2_create_keypair.png&quot; alt=&quot;image: create key pair&quot;&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Download the &lt;code&gt;shinybootstrap.pem&lt;/code&gt; key pair.  We recommend that you place your &lt;code&gt;shinybootstrap.pem&lt;/code&gt; key pair in a 
safe folder, but for purposes of this guide, we will assume that you are placing the file in a folder under the 
home directory &lt;code&gt;~/sshKeys&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;# create sshKeys folder in home directory&lt;/span&gt;
mkdir ~/sshKeys

&lt;span class=&quot;c&quot;&gt;# navigate to your .pem directory and move the .pem file to the sshKeys folder&lt;/span&gt;
mv shinybootstrap.pem ~/sshKeys

&lt;span class=&quot;c&quot;&gt;# grant sudo access to .pem file&lt;/span&gt;
chmod 400 ~/sshKeys/shinybootstrap.pem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt;: If you ever run into a &lt;code&gt;Permission denied (publickey)&lt;/code&gt; error message, this is because you are not able 
to access the &lt;code&gt;.pem&lt;/code&gt; file as a superuser.  Make sure that you have granted sudo access to the file using the 
command &lt;code&gt;chmod 400&lt;/code&gt; as outlined above.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;OPTIONAL:&lt;/strong&gt; &lt;em&gt;Create a bash alias to access our EC2 instance.&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;It is useful to create an alias to access the EC2 instance, otherwise we would be typing a long command to 
access our EC2 instance each time.  For this guide, we will create an alias &lt;code&gt;awslogin&lt;/code&gt; and register this in 
the &lt;code&gt;bash_aliases&lt;/code&gt; file using the &lt;code&gt;echo &amp;quot;blahblahablah&amp;quot; &amp;gt;&amp;gt; ~/.bash_aliases&lt;/code&gt; command:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;alias awslogin='ssh -i ~/sshKeys/shinybootstrap.pem ubuntu@public_dns_name'&quot;&lt;/span&gt; &amp;gt;&amp;gt; ~/.bash_aliases
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;where &lt;code&gt;public_dns_name&lt;/code&gt; is the public DNS name of your EC2 instance created e.g.
&lt;code&gt;ec2-54-183-2-10.us-west-1.compute.amazonaws.com&lt;/code&gt; or the public IP itself &lt;code&gt;54.183.2.10&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-EC2Bootstrap/aws_ec2_dns_name.png&quot; alt=&quot;image: dns name&quot;&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; The public DNS name and public IP may not be static/permanent, e.g. their values can change when 
&lt;code&gt;shiny-server&lt;/code&gt; restarts.  For a full permanent solution to creating a &lt;code&gt;bash_alias&lt;/code&gt;, you would need to create 
an &lt;a href=&quot;http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html&quot;&gt;Elastic IP&lt;/a&gt; (but we will defer that for the readers to the Amazon guide if readers wish to research the
details).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Restart your terminal to access the changes and you should connect to your EC2 instance simply by typing 
&lt;code&gt;awslogin&lt;/code&gt; in the terminal console.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;install-r&quot;&gt;Install R&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Phew! The tough parts are over, we can now move onto installing R in our EC2 instance!&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;First, create a superuser root password by entering a password in the EC2 command line.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;sudo password root
su
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Update your barebones EC2 virtual machine and install R:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;sudo apt-get update
sudo apt-get install r-base-dev
sudo apt-get install libcurl4-openssl-dev
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;R is now successfuly installed!&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;install-r-packages&quot;&gt;Install R Packages&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Base R is argubly boring, so let&amp;#39;s get started with installing a few important packages, &lt;code&gt;shiny&lt;/code&gt; being an 
obviously shiny option.  (&lt;em&gt;while installing these packages, make sure you are in &lt;code&gt;su&lt;/code&gt; mode and I highly recommend
installing them from the &lt;code&gt;0-Cloud&lt;/code&gt; CRAN repository&lt;/em&gt;)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;From your EC2 command line:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;R       &lt;span class=&quot;c&quot;&gt;# enter the R console&lt;/span&gt;

install.packages&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;shiny&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
install.packages&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ggplot2&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
q&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;         &lt;span class=&quot;c&quot;&gt;# quit R&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;A few other packages are highly recommended but you might encounter issues installing certain packages due to 
memory limitations available on the EC2 instance or missing libraries in our EC2 instance.  For more details, 
please refer to the &lt;a href=&quot;#problematic-packages&quot;&gt;Problematic Packages&lt;/a&gt; section for a brief outline.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Other than that, you can come back anytime in the future to install R-packages by logging in with &lt;code&gt;su&lt;/code&gt; and 
installing R packages via the command line.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;install-shiny-server&quot;&gt;Install Shiny Server&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;shiny&lt;/code&gt; requires a server to run.  The next step is to setup &lt;code&gt;shiny-server&lt;/code&gt; in our EC2 instance.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Run the following commands in EC2:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;sudo apt-get install gdebi-core
wget http://download3.rstudio.org/ubuntu-12.04/x86_64/shiny-server-1.3.0.403-amd64.deb
sudo gdebi shiny-server-1.3.0.403-amd64.deb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; You can install a different version of &lt;code&gt;shiny-server&lt;/code&gt; in the above command prompt by adjusting the 
&lt;code&gt;shiny-server-version_number&lt;/code&gt; in the &lt;code&gt;wget&lt;/code&gt; and &lt;code&gt;gdebi&lt;/code&gt; commands above.  You can check for the latest versions of
 [RStudio shiny-server][] on the official site.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;OPTIONAL:&lt;/strong&gt; &lt;em&gt;Change the listening port from &lt;code&gt;3838&lt;/code&gt; to default &lt;code&gt;80&lt;/code&gt;&lt;/em&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;code&gt;shiny-server&lt;/code&gt; by default runs applications on the URL and port: &lt;code&gt;http://domain:3838/&lt;/code&gt;.  We can take the time
to make an easy change to the &lt;code&gt;shiny-server&lt;/code&gt; &lt;code&gt;config&lt;/code&gt; file to listen to the default port at &lt;code&gt;80&lt;/code&gt;.  This will 
allow our future apps to be accessed without specifying a port number by simply going to &lt;code&gt;http://domain/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Execute the following commands in your EC2 instance:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /etc/shiny-server/ 
sudo nano shiny-server.conf
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;At this point, you can use a text editor (unfortunately we can only use CLI and non-GUI text editors) to 
change the line &lt;code&gt;listen 3838;&lt;/code&gt; to &lt;code&gt;listen 80;&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Makes sure to save the changes and you can now access your shiny instances without specifying the &lt;code&gt;3838&lt;/code&gt; port
number!&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;And we&amp;#39;re done!&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;install-git&quot;&gt;Install Git&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;git&lt;/code&gt; is probably one of the greatest creations and tools that you can use in your life, so it&amp;#39;s good to include 
it in our EC2 instance.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Installing &lt;code&gt;git&lt;/code&gt; is as simple as typing:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;sudo apt-get install git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;git&lt;/code&gt; is very critical in our Shiny EC2 workflow.  If you are not familiar with using &lt;code&gt;git&lt;/code&gt;, here are some great 
resources to get on speed:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;https://www.codeschool.com/courses/try-git&quot;&gt;Code School&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://git-scm.com/&quot;&gt;Official Git&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;workflow-overview&quot;&gt;Workflow Overview&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;A big part of the EC2 R Shiny workflow is to develop with RStudio on your local machines and use Github as a 
repository station for transferring data between your local machine and EC2 instance.  Make sure that you are
familiar with the basic &lt;code&gt;git&lt;/code&gt; commands: &lt;code&gt;pull&lt;/code&gt;, &lt;code&gt;push&lt;/code&gt;, &lt;code&gt;clone&lt;/code&gt;.  It&amp;#39;s going to be a big part of the development 
cycle.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The following diagram outlines the overall workflow of the EC2 R Shiny workflow:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-us-west-1.amazonaws.com/chrisrzhou/github/RShiny-EC2Bootstrap/aws_ec2_workflow.png&quot; alt=&quot;image: workflow&quot;&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Workflow Summary:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt; Develop on your local machine with RStudio.&lt;/li&gt;
&lt;li&gt; Whenever you are ready to show your work to the world, you would &lt;code&gt;git push&lt;/code&gt; your changes to your Github 
repository.&lt;/li&gt;
&lt;li&gt; Initiate your EC2 instance with the same codebase on Github by using &lt;code&gt;git clone&lt;/code&gt; into &lt;code&gt;/srv/shiny-server/&lt;/code&gt; 
(this is the folder where &lt;code&gt;shiny-server&lt;/code&gt; serves your application).&lt;/li&gt;
&lt;li&gt; If there are changes to be made to your app, repeat steps 1 and 2 to &lt;code&gt;git push&lt;/code&gt; updates to Github from your 
local machine, and then perform a &lt;code&gt;git pull&lt;/code&gt; in your EC2 instance to update your application in EC2.&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;problematic-packages&quot;&gt;Problematic Packages&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Since our EC2 instance is completely barebones, installing various packages might be problematic due to a lack of
libraries that EC2 comes with.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;My recommendation is to do searches on &lt;a href=&quot;http://stackoverflow.com/&quot;&gt;Stackoverflow&lt;/a&gt; and &lt;a href=&quot;http://google.com/&quot;&gt;Google&lt;/a&gt; using keywords such as &lt;code&gt;EC2&lt;/code&gt;, 
&lt;code&gt;package-name&lt;/code&gt;, &lt;code&gt;installation&lt;/code&gt;, &lt;code&gt;R&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;You could run into issues with missing Python libraries and version requirements for R and various packages, but 
most of them can be solved by searching on Stackoverflow and Google.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;You could also encounter issues that result from the limited memory allocated in the EC2 instance, which would 
not complete installations of some packages (e.g. &lt;code&gt;dplyr&lt;/code&gt;, &lt;code&gt;ggvis&lt;/code&gt;).  If this is the case, the solution would be 
to install these packages on your local machine, and grab the uncompiled files in the local machine &lt;code&gt;R&lt;/code&gt; libraries
and copy them over to your EC2 R libraries.  You have a few ways to transfer files from local machine to EC2 and 
I will refer you to Stackoverflow and Google on how to do so.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Stackoverflow + Goole are most definitely the best teachers and guides out there for resolving problematic 
packages.  My job here is to just inform on some of the issues you may encounter :)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;examples&quot;&gt;Examples&lt;/h2&gt;

&lt;p&gt;Here are some project examples of Shiny EC2 instances that I have built and their respective Github codebase.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  State Crime Rates
&lt;sub&gt;(&lt;a href=&quot;http://shiny.vis.datanaut.io/StateCrimeRates/&quot;&gt;EC2&lt;/a&gt; | &lt;a href=&quot;https://github.com/chrisrzhou/RShiny-StateCrimeRates&quot;&gt;Github&lt;/a&gt;)&lt;/sub&gt;&lt;/li&gt;
&lt;li&gt;  Labor Force Statistics 
&lt;sub&gt;(&lt;a href=&quot;http://shiny.vis.datanaut.io/LaborForceStatistics/&quot;&gt;EC2&lt;/a&gt; | &lt;a href=&quot;https://github.com/chrisrzhou/RShiny-LaborForceStatistics&quot;&gt;Github&lt;/a&gt;)&lt;/sub&gt;&lt;/li&gt;
&lt;li&gt;  Box Office Mojo 
&lt;sub&gt;(&lt;a href=&quot;http://shiny.vis.datanaut.io/BoxOfficeMojo/&quot;&gt;EC2&lt;/a&gt; | &lt;a href=&quot;https://github.com/chrisrzhou/RShiny-BoxOfficeMojo&quot;&gt;Github&lt;/a&gt;)&lt;/sub&gt;&lt;/li&gt;
&lt;li&gt;  Power to Choose 
&lt;sub&gt;(&lt;a href=&quot;http://shiny.vis.datanaut.io/PowerToChoose/&quot;&gt;EC2&lt;/a&gt; | &lt;a href=&quot;https://github.com/chrisrzhou/RShiny-PowerToChoose&quot;&gt;Github&lt;/a&gt;)&lt;/sub&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;

&lt;p&gt;This guide would not be possible without the works and guides provided by previous people.  I&amp;#39;m listing some 
additional resources that are helpful for the general audience.  Please contact me if there are any 
issues/corrections with this guide.  Thank you!&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Shiny AWS EC2 Guides:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;http://tylerhunt.co/2014/03/amazon-web-services-rstudio/&quot;&gt;Tyler Hunt&amp;#39;s guide to set up Shiny AWS EC2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://www.r-bloggers.com/deploying-shiny-server-on-amazon-some-troubleshoots-and-solutions/&quot;&gt;Custom AWS inbound rules&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Other resources:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;  &lt;a href=&quot;http://rstudio.github.io/shiny-server/latest/&quot;&gt;Official RStudio shiny-server guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html&quot;&gt;Creating ElasticIP for maintaining &amp;quot;permanent&amp;quot; IP addresses&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://aws.amazon.com/route53/&quot;&gt;AWS Route 53 to rename EC2 instances to domain address&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://stackoverflow.com/&quot;&gt;Stackoverflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;  &lt;a href=&quot;http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html&quot;&gt;dplyr&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;sub&gt;(&lt;a href=&quot;#contents&quot;&gt;back to contents&lt;/a&gt;)&lt;/sub&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;!-- links --&gt;

&lt;!-- resource section links --&gt;

&lt;!-- example section links --&gt;

&lt;!-- s3 image links --&gt;

&lt;!-- jekyll post links --&gt;
</description>
        <pubDate>Mon, 19 Jan 2015 19:37:00 +0000</pubDate>
        <link>http://localhost:4000/blog/tutorials/2015/01/19/r-shiny-ec2-bootstrap-guide</link>
        <guid isPermaLink="true">http://localhost:4000/blog/tutorials/2015/01/19/r-shiny-ec2-bootstrap-guide</guid>
        
        <category>github</category>
        
        <category>r</category>
        
        <category>shiny</category>
        
        <category>aws</category>
        
        <category>ec2</category>
        
        
        <category>tutorials</category>
        
      </item>
    
      <item>
        <title>Hello Jekyll!</title>
        <description>&lt;p&gt;This is my first post using Jekyll. Pretty cool stuff&lt;/p&gt;

&lt;h1 id=&quot;javascript-test&quot;&gt;Javascript Test&lt;/h1&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;hello&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;who&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Hello &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;who&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;hello&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;world&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h1 id=&quot;naviation-tests&quot;&gt;Naviation Tests&lt;/h1&gt;

&lt;p&gt;Test link back to &lt;a href=&quot;/&quot;&gt;home&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test link up &lt;a href=&quot;./..&quot;&gt;one directory&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test link to external &lt;a href=&quot;http://www.reddit.com/&quot;&gt;site&lt;/a&gt;&lt;/p&gt;

&lt;!-- links --&gt;
</description>
        <pubDate>Sat, 03 Jan 2015 12:31:31 +0000</pubDate>
        <link>http://localhost:4000/blog/site/2015/01/03/welcome-to-jekyll</link>
        <guid isPermaLink="true">http://localhost:4000/blog/site/2015/01/03/welcome-to-jekyll</guid>
        
        <category>jekyll</category>
        
        
        <category>site</category>
        
      </item>
    
  </channel>
</rss>
